(this.webpackJsonpprosovis=this.webpackJsonpprosovis||[]).push([[0],{323:function(e,t,n){},335:function(e,t,n){},356:function(e,t,n){},397:function(e,t,n){},399:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),i=n.n(c),a=n(44),o=n.n(a),u=(n(322),n(4)),s=n(5),l=(n(323),n(6));function d(e){var t=Object(c.useRef)();return void 0===t.current&&(t.current=e()),t}function b(){return d((function(){return{click:!1,dragging:!1,x:0,y:0,draggingTreshold:function(e,t){return Math.abs(e.x-t.pageX)+Math.abs(e.y-t.pageY)>6}}}))}var f=n(10),j=n(3),O=Object(f.c)({name:"selection",initialState:null,reducers:{setSelection:function(e,t){var n=t.payload;return Object(j.isArray)(n)?Object(j.pipe)(Object(j.sortBy)("id"),Object(j.sortedUniqBy)("id"))(n):[n]},addSelection:function(e,t){var n=t.payload;return Object(j.isArray)(n)?e?e.concat(n):n:e?void e.push(n):[n]},clearSelection:function(){return null}}}),p=O.actions,h=p.setSelection,v=p.addSelection,g=p.clearSelection,m=O.reducer,x=n(7),y=n(15),w=n(23),k=n(36),C=n(64),M=n.n(C);n(335);function E(e){var t,n=e.self,r=e.order,c=e.auto,i=e.col;return t={},Object(w.a)(t,"self-".concat(n),n),Object(w.a)(t,"order-".concat(r),r),Object(w.a)(t,"flex-auto",c),Object(w.a)(t,"flex-col",i),t}var _=function(e){var t,n=e.tag,c=void 0===n?"div":n,i=e.className,a=e.children,o=e.column,u=e.items,s=e.justify,l=e.onClick,d=e.onMouseUp,b=e.onMouseEnter,f=e.onMouseLeave,j=e.wrap,O=Object(k.a)(e,["tag","className","children","column","items","justify","onClick","onMouseUp","onMouseEnter","onMouseLeave","wrap"]),p=c;return Object(r.jsx)(p,{className:M()("flex",i,(t={},Object(w.a)(t,"justify-".concat(s),s),Object(w.a)(t,"flex-wrap",!0===j),Object(w.a)(t,"flex-nowrap",!1===j),Object(w.a)(t,"items-".concat(u),u),Object(w.a)(t,"flex-column",o),t),E(O)),onClick:l,onMouseUp:d,onMouseEnter:b,onMouseLeave:f,children:a})},S=Object(c.memo)(_),N=function(e){return e.actorData.actors};function I(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n&&null!==(t=e.shortLabel)&&void 0!==t?t:e.label}var A=function(e){var t=e.as,n=e.id,c=e.short,a=Object(l.c)(N),o=t||i.a.Fragment;if("string"===typeof n){if(!a)return Object(r.jsx)(o,{children:"Actor reference not found"});n=a[n]}var u=n;return Object(r.jsx)(o,{children:I(u,c)})},L=n(9),B=function(e){return e.maxActors.max},R=Object(L.a)((function(e){return e.maxActors.current}),N,(function(e,t){return t&&e?t[e]:null})),z=Object(f.c)({initialState:{max:5,current:null},name:"detail/max-actors",reducers:{setMaxActors:function(e,t){e.max=t.payload},setCurrent:function(e,t){e.current=t.payload},resetCurrent:function(e){e.current=null}}}),T=z.reducer,P=z.actions,D=(P.setMaxActors,P.setCurrent),F=P.resetCurrent,G=n(414),$=n(404),U=n(405),H=n(14),W=n.n(H),V=n(8);function q(e){var t,n,r,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i={kind:"DatationLength",message:"Le nombre de dates est incorrect",value:String(null===(t=e.datation)||void 0===t?void 0:t.length),expected:c,level:"Warning"};if(Array.isArray(c)){if(!c.some(Object(j.isEqual)(null===(r=e.datation)||void 0===r?void 0:r.length)))return i}else if("object"===typeof c){var a,o;if(!Object(j.inRange)(c.start,c.end,null!==(a=null===(o=e.datation)||void 0===o?void 0:o.length)&&void 0!==a?a:0))return i}else if((null===(n=e.datation)||void 0===n?void 0:n.length)!==c)return i}function K(e){var t,n;return e.place?(null===(t=e.place)||void 0===t?void 0:t.lat)&&(null===(n=e.place)||void 0===n?void 0:n.lng)?void 0:{kind:"MissingPlaceCoordinates",message:"Les coordonn\xe9es GPS de l'evenement ne sont pas d\xe9finis",value:"null",expected:"Coordonn\xe9es GPS",level:"Warning"}:{kind:"MissingPlace",message:"L'evenement n'as pas de lieu d\xe9fini",value:"null",expected:"Place",level:"Warning"}}function Z(e){if(!e.localisation)return{kind:"MissingLocalisation",message:"La localisation n'est pas d\xe9fini",level:"Warning",value:"null",expected:"Localisation"}}function X(e,t){var n=t.filter((function(t){return t.event.kind===e.kind}));if(n.length>1)return{kind:"EventDuplication",level:"Error",message:"Les evenements de ".concat(e.kind," doivent \xeatre uniques"),value:n.length,expected:1}}function Y(e,t){if("Birth"!==e.kind){var n,r=null===(n=Object(j.first)(e.datation))||void 0===n?void 0:n.value,c=Object(V.s)(t.birth.flatMap((function(e){var t;return null!==(t=e.event.datation)&&void 0!==t?t:[]})),(function(e){return e.value}));if(r&&c&&r<=c)return{kind:"DatationBeforeBirth",level:"Error",message:"L'evenement s'est produit avant la naissance",value:r,expected:"<= ".concat(c)}}}function J(e,t){if("Death"!==e.kind){var n,r=null===(n=Object(j.last)(e.datation))||void 0===n?void 0:n.value,c=Object(V.r)(t.death.flatMap((function(e){var t;return null!==(t=e.event.datation)&&void 0!==t?t:[]})),(function(e){return e.value}));if(r&&c&&r>c)return{kind:"DatationBeforeDeath",level:"Error",message:"L'evenement s'est produit apr\xe8s la mort",value:r,expected:"> ".concat(c)}}}function Q(e){return{birth:e.filter((function(e){return"Birth"===e.event.kind})),death:e.filter((function(e){return"Death"===e.event.kind}))}}function ee(e,t){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={add:function(n){return n&&e.push(n),t},addIf:function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];var i=Object(j.find)((function(e){return void 0!==e}),r);return i&&e.push(i),t},get errors(){if(e.length>0)return e}};return t}([]);switch(e.event.kind){case"Birth":case"Death":n.add(X(e.event,t.events)).add(q(e.event,1)).add(K(e));break;case"Education":n.add(q(e.event,2)).add(Z(e)).add(K(e)).add(Y(e.event,t)).add(J(e.event,t));break;case"ObtainQualification":n.add(q(e.event,1)).add(Z(e)).add(K(e)).add(Y(e.event,t)).add(J(e.event,t));break;case"PassageExamen":n.add(q(e.event,1)).add(Y(e.event,t)).add(J(e.event,t)).add(Z(e)).add(K(e));break;case"Retirement":n.add(q(e.event,1)).add(Y(e.event,t)).add(J(e.event,t));break;case"SuspensionActivity":n.add(q(e.event,2)).add(Y(e.event,t)).add(J(e.event,t))}return n.errors}var te=function(e){return e.localisationData.localisations},ne=function(e){return e.eventData.events},re=Object(L.a)(ne,te,N,(function(e,t,n){return e&&t&&n&&Object(j.map)((function(e){return function(e,t,n){if(e){var r,c=t.localisation&&e[t.localisation]?e[t.localisation]:void 0;if(c)return"Localisation"===c.kind?c.localisation&&(r=e[c.localisation]):r=c,{actor:n,event:t,localisation:c,place:r}}return{actor:n,event:t}}(t,e,n[e.actor])}),e)})),ce=Object(L.a)(re,(function(e){return e&&Object(j.groupBy)("actor.id",e)}));var ie=function(e){return e.detailActors},ae=Object(L.a)(N,ie,(function(e,t){return e?Object(j.flow)(Object(j.map)((function(t){return e[t]})),Object(j.keyBy)((function(e){return e.id})))(t):{}})),oe=Object(L.a)(ae,ce,(function(e,t){return t?Object(j.flatMap)((function(e){var n=t[e.id],r=Object(u.a)(Object(u.a)({},Q(n)),{},{events:n});return n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{errors:ee(e,r)})}))}),e):[]})),ue=n(11);function se(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";default:return typeof e}}function le(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?""+e.length:"is defined";case"undefined":return"undefined";case"number":default:return String(e)}}var de=Object(f.c)({name:"custom-filter",initialState:{selected:null,filters:{}},reducers:{setDefault:function(e,t){var n=t.payload;e.selected=n},add:function(e,t){var n=t.payload,r=n.selected,c=n.filter,i=n.values;e.filters[c]={name:c,kinds:Object(j.pipe)(Object(j.map)("kind"),j.uniq)(i),values:Object(j.keyBy)("value",i)},r&&(e.selected=c)},remove:function(e,t){var n=t.payload;delete e.filters[n],e.selected===n&&(e.selected=null)},toggle:function(e,t){var n=Object(x.a)(t.payload,2),r=n[0],c=n[1];e.filters[r]&&(Object(j.isNil)(e.filters[r].values[c].value)?e.filters[r].values[c].value=c:e.filters[r].values[c].value=null)}}}),be=de.reducer,fe=de.actions,je=fe.setDefault,Oe=fe.add,pe=fe.remove,he=fe.toggle,ve=function(e){return e.customFilter},ge=Object(L.a)(ve,(function(e){return e.filters})),me=Object(L.a)(ve,(function(e){return e.selected})),xe=Object(L.a)(me,(function(e){return function(t){return le(Object(j.get)(null!==e&&void 0!==e?e:"event.kind",t))}})),ye=Object(L.a)(ve,(function(e){var t=e.filters,n=e.selected;return null!==n?t[n]:null})),we=Object(L.a)(ye,(function(e){return Object(ue.keys)(null===e||void 0===e?void 0:e.values)})),ke=Object(L.a)(ve,(function(e){var t=e.filters,n=e.selected;return Object(j.pickBy)((function(e,t){return t!==n}),t)})),Ce=Object(L.a)(ke,Object(j.some)((function(e){return Object(j.some)((function(e){return null===e.value}),e.values)}))),Me=Object(L.a)(ge,(function(e){return function(t){return!Object(ue.some)(e,(function(e,n){return null===e.values[le(Object(j.get)(n,t))].value}))}})),Ee=Object(L.a)(we,(function(e){return V.x().domain(e).range(V.B)})),_e=function(e){return e.mask},Se=Object(L.a)(_e,(function(e){return e.interval})),Ne=Object(L.a)(_e,(function(e){return e.actor})),Ie=Object(L.a)(_e,(function(e){return e.bounds})),Ae=Object(L.a)(Se,(function(e){return e?function(t){var n=t.event.datation;if(Object(j.isNil)(n)||0===n.length)return!0;if(1===n.length){var r=Object(G.a)(n[0].value);return Object($.a)(r,Object(G.a)(e.start))&&Object(U.a)(r,Object(G.a)(e.end))}n=n;var c=Object(G.a)(n[0].value),i=Object(G.a)(n[1].value);return!(Object(U.a)(Object(G.a)(e.end),c)||Object($.a)(Object(G.a)(e.start),i))}:void 0})),Le=Object(L.a)(Ne,(function(e){return e?function(t){return Pe(t.actor,e)}:void 0})),Be=Object(L.a)(Ie,(function(e){return e?function(t){var n=t.place;return!(n&&!Object(j.isNil)(n.lat)&&!Object(j.isNil)(n.lng))||W.a.latLngBounds(e).contains([+n.lat,+(null===n||void 0===n?void 0:n.lng)])}:void 0})),Re=Object(L.a)(Ae,Le,Be,Me,(function(e,t,n,r){return function(c){return!!r(c)&&(!(t&&!t(c))&&(!(e&&!e(c))&&!(n&&!n(c))))}})),ze=Object(L.a)(oe,Re,(function(e,t){return e.filter(t)})),Te=Object(L.a)(ze,Object(j.keyBy)("event.id"));function Pe(e,t){var n=t&&t[e.id];return void 0===n||n}var De=Object(L.a)((function(e){return e.relationsData}),(function(e){return e.relations})),Fe=Object(L.a)(De,(function(e){return e&&Object(j.reduce)((function(e,t){return t.actors.forEach((function(n){e.has(n)||e.set(n,new Set);var r=e.get(n);t.actors.forEach((function(e){e!==n&&r.add(e)}))})),e}),new Map,e)}));function Ge(e,t,n){var r=e.actorRing.get(n.source);r||e.actorRing.set(n.source,r={ghosts:new Set,locsLinks:new Map}),r.ghosts.add(n.target);var c=r.locsLinks,i=c.get(n.loc);i||c.set(n.loc,i=new Map),i.set(n.id,n),e.ghosts.has(n.target)||e.ghosts.set(n.target,t[n.target]),e.actors.has(n.source)||e.actors.set(n.source,Object(u.a)({},t[n.source]))}var $e=Object(L.b)(L.c,(function(e,t){return Object(j.isEqual)(Object(j.keys)(e),Object(j.keys)(t))}))(Object(L.a)(ze,(function(e){return Object(j.pipe)(Object(j.uniqBy)("actor.id"),Object(j.map)("actor"),Object(j.keyBy)("id"))(e)})),Object(L.a)(De,(function(e){return Object(j.map)((function(e){var t=e.actors,n=Object(k.a)(e,["actors"]);return Object(u.a)(Object(u.a)({},n),{},{id:t.join(":"),source:t[0],target:t[1]})}),e)})),N,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(j.transform)((function(t,r){var c=r,i=c.source,a=c.target;(e[i]||e[a])&&(r=Object(u.a)({},r),e[i]&&e[a]?(t.actors.has(i)||t.actors.set(i,Object(u.a)({},Object(j.get)(i,n))),t.actors.has(a)||t.actors.set(a,Object(u.a)({},Object(j.get)(a,n))),t.links.set(r.id,r)):e[i]?Ge(t,n,r):e[a]&&(r.source=a,r.target=i,Ge(t,n,r)));var o=t.locLinks.get(r.loc);o||t.locLinks.set(r.loc,o=new Map),o.set(r.id,r)}),{locLinks:new Map,actorRing:new Map,links:new Map,ghosts:new Map,actors:new Map},t)})),Ue=Object(L.a)($e,(function(e){return e.actors})),He=Object(L.a)($e,(function(e){return e.actorRing})),We=Object(L.a)($e,(function(e){return e.links})),Ve=Object(L.a)($e,(function(e){return e.ghosts})),qe={ghosts:new Map,actorRingLinks:new Map,ringLinks:new Map};function Ke(e,t){var n=e.actorRing,r=e.locLinks,c=e.actors;if(!t)return qe;var i=n.get(t.actor);if(!i)return qe;var a=new Map,o=new Map,u=i.locsLinks.get(t.loc)||new Map,s=r.get(t.loc);return u.forEach((function(e){c.forEach((function(n){if(n.id!==t.actor){var r=s.get([n.id,e.target].sort().join(":"));r&&a.set(r.id,r)}})),u.forEach((function(t){if(e.target!==t.target){var n=s.get([e.target,t.target].sort().join(":"));n&&o.set(n.id,n)}}))})),{ghosts:u,actorRingLinks:a,ringLinks:o}}var Ze=Object(f.c)({name:"relation/selection",initialState:null,reducers:{setRelationSelection:function(e,t){return t.payload},clearRelationSelection:function(){return null}}}),Xe=function(e){return e.relationSelection},Ye=Object(L.a)($e,Xe,Ke),Je=Ze.actions,Qe=Je.setRelationSelection,et=Je.clearRelationSelection,tt=Ze.reducer,nt=Object(f.c)({name:"detail/actor",initialState:[],reducers:{reset:function(){return[]},add:function(e,t){var n=t.payload;return Array.isArray(n)?Array.from(new Set(e.concat(n))):Array.from(new Set(e.concat([n])))},remove:function(e,t){var n=t.payload;return Array.isArray(n)?e.filter((function(e){return n.includes(e)})):e.filter((function(e){return e!==n}))}}}),rt=nt.reducer,ct=nt.actions,it=(ct.reset,ct.add),at=ct.remove,ot=function(e){return function(t,n){var r=n(),c=ie(r),i=B(r);Object(j.size)(c)>=i?t(D(e)):t(it(e))}},ut=s.a.div.withConfig({displayName:"ActorModal__AbsolDiv",componentId:"sc-rm2t9v-0"})(["position:absolute;top:0;bottom:0;left:0;right:0;z-index:9999;"]),st=Object(s.a)(ut).withConfig({displayName:"ActorModal__GreyPlane",componentId:"sc-rm2t9v-1"})(["background-color:black;opacity:0.2;z-index:initial;"]),lt=s.a.div.withConfig({displayName:"ActorModal__Flexible",componentId:"sc-rm2t9v-2"})(["display:flex;height:100%;align-items:center;justify-content:center;"]),dt=s.a.div.withConfig({displayName:"ActorModal__ModalDiv",componentId:"sc-rm2t9v-3"})(["background-color:white;position:relative;max-width:30em;padding:1em;border-radius:3px;width:auto;filter:drop-shadow(0 0 0.5em ",");"],(function(e){return e.color||"red"})),bt=function(){var e=Object(l.b)(),t=Object(l.c)(ae),n=Object(l.c)(B),i=Object(l.c)(R),a=Object(c.useState)(!1),o=Object(x.a)(a,2),u=o[0],s=o[1];Object(c.useEffect)((function(){Object(j.size)(t)>=n&&null!=i&&(s(!0),O(Object(ue.mapValues)(t,(function(e){return{actor:e,checked:!0}}))))}),[t,n,i]);var d=Object(c.useState)({}),b=Object(x.a)(d,2),f=b[0],O=b[1];Object(c.useEffect)((function(){O(Object(ue.mapValues)(t,(function(e){return{actor:e,checked:!0}})))}),[t]);var p=Object(c.useCallback)((function(e){O((function(t){return Object(ue.mapValues)(t,(function(t,n){return n.toString()===e.toString()?{actor:t.actor,checked:!t.checked}:t}))}))}),[]),h=Object(c.useCallback)((function(){var t;null!==i&&e((t={current:i,checkboxs:f},function(e,n){var r,c=Xe(n());Object(j.flow)(Object(j.filter)((function(e){return e.checked})),Object(j.map)((function(e){return e.actor.id})),at,e)(t.checkboxs),e(it(t.current.id)),c&&!(null===(r=Object(j.find)((function(e){return e.actor.id===c.actor}),t.checkboxs))||void 0===r?void 0:r.checked)&&e(et()),e(F())})),s(!1)}),[e,i,f]),v=Object(c.useCallback)((function(){e(F()),s(!1)}),[e]),g=Object(c.useMemo)((function(){return Object(j.filter)((function(e){return e.checked}),f).length}),[f]),m=g<n?"green":void 0;return u?Object(r.jsxs)(ut,{style:{position:"absolute"},children:[Object(r.jsx)(st,{}),Object(r.jsx)(lt,{children:Object(r.jsxs)(dt,{color:m,children:[Object(r.jsx)("h3",{children:"Impossible d'avoir plus de 5 acteurs : veuillez en supprimer au moins un."}),Object(r.jsx)("hr",{}),i&&Object(r.jsxs)("div",{children:["Nouvel acteur : ",Object(r.jsx)(A,{id:i})]}),Object(r.jsx)("hr",{}),Object(r.jsx)("ul",{children:Object(ue.map)(f,(function(e,t){var n=e.actor,c=e.checked;return Object(r.jsx)(ft,{actor:n,switcher:p,checked:c},t)}))}),Object(r.jsx)("hr",{}),Object(r.jsxs)(S,{justify:"around",children:[Object(r.jsx)("button",{onClick:v,children:"Annuler"}),Object(r.jsx)("button",{onClick:h,disabled:g>=n,children:"Terminer"})]})]})})]}):null},ft=function(e){var t=e.actor,n=e.checked,i=e.switcher,a=Object(c.useCallback)((function(){i(t.id)}),[i,t.id]),o=n?y.p:y.m;return Object(r.jsxs)("div",{style:{opacity:n?void 0:.3},children:[Object(r.jsx)("span",{className:"pointer",onClick:a,children:Object(r.jsx)(o,{className:"ma1 flex-shrink-0 red",verticalAlign:"text-bottom","aria-label":"Supprimer"})}),Object(r.jsx)(A,{id:t})]})},jt=n(106),Ot=n.n(jt);function pt(e){return e.stopPropagation(),e}function ht(e){return{onClick:i.a.useCallback(gt(e),[e]),onMouseUp:pt}}function vt(e){var t=Object(l.b)();return ht((function(){return t(h(e))}))}function gt(e){return function(t){return e(pt(t))}}var mt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\xa9";return Ot.a.highlight(e,n,n).split(n).map((function(e,n){return n%2?t(e,n):e}))},xt=function(e){var t=e.r,n=e.className,c=e.onClick,i=Object(l.b)(),a=ht((function(){i(ot(t.id)),c()}));return Object(r.jsx)("li",Object(u.a)(Object(u.a)({className:n,id:"res-"+t.id},a),{},{children:mt(t,(function(e,t){return Object(r.jsx)("b",{children:e},"".concat(e,"_").concat(t))}))}))},yt=Object(L.a)(N,(function(e){return Object(j.map)((function(e){return Object(u.a)({id:e.id},Ot.a.prepare(e.label.normalize("NFD").replace(/[\u0300-\u036f]/g,"")))}),e)})),wt={limit:20,threshold:-1e4},kt=s.a.ul.withConfig({displayName:"Autocomplete__AutocompleteItems",componentId:"sc-1n39x23-0"})(["position:absolute;top:100%;left:0;right:0;background-color:#fff;border:1px solid black;list-style-type:none;padding:0.25em;border-radius:3px;margin:0;z-index:1;"]),Ct=s.a.div.withConfig({displayName:"Autocomplete__Container",componentId:"sc-1n39x23-1"})(["position:relative;"]),Mt=s.a.input.withConfig({displayName:"Autocomplete__StyledInput",componentId:"sc-1n39x23-2"})(["border:1px solid transparent;background-color:#f1f1f1;padding:10px;font-size:16px;background-color:#f1f1f1;width:100%;line-height:1.5;"]),Et=Object(s.a)(xt).withConfig({displayName:"Autocomplete__Item",componentId:"sc-1n39x23-3"})(["border-bottom:1px solid lightgray;cursor:pointer;padding:0.25em 1em;&:last-child{border-bottom:none;}&:hover{background-color:lightgray;}"]),_t=function(){var e=Object(c.useState)(""),t=Object(x.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)([]),o=Object(x.a)(a,2),u=o[0],s=o[1],d=Object(l.c)(ae),b=Object(l.c)(yt);function f(){i("")}return Object(c.useEffect)((function(){s(Object(j.filter)((function(e){return void 0===d[e.id]}),Ot.a.go(n,b,wt)))}),[n,d,b]),Object(r.jsxs)(Ct,{onMouseUpCapture:pt,children:[Object(r.jsx)(Mt,{type:"text",value:n,onChange:function(e){i(e.target.value)},placeholder:"Actor search"}),u.length>0&&Object(r.jsx)(kt,{children:u.map((function(e){return Object(r.jsx)(Et,{r:e,onClick:f},e.id)}))})]})};var St=function(e){Object(c.useEffect)(e,[])},Nt="#eee",It="#ccc",At="lightgray",Lt="#6c757d",Bt="#d73a49",Rt="#f66a0a",zt="#2188ff",Tt={moongray:Nt,lightgray:At,darkgray:Lt,red:Bt,orange:Rt,blue:zt,animation:"200ms"},Pt=n(58);function Dt(){var e=Object(Pt.a)(["{\n    to { transform: rotate(360deg); }\n  }"]);return Dt=function(){return e},e}var Ft=s.a.div.withConfig({displayName:"Loading__LoadingSplash",componentId:"sc-1aisobt-0"})(["position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0;bottom:0;right:0;background-color:rgba(0,0,0,0.1);backdrop-filter:blur(2px);z-index:500;"]),Gt=Object(s.b)(Dt()),$t=s.a.span.withConfig({displayName:"Loading__Spinner",componentId:"sc-1aisobt-1"})(["width:","em;height:","em;vertical-align:text-bottom;border:0.25em solid white;border-right-color:transparent;border-radius:50%;animation:"," 0.75s linear infinite;"],(function(e){var t=e.size;return void 0===t?3:t}),(function(e){var t=e.size;return void 0===t?3:t}),Gt),Ut=s.a.div.withConfig({displayName:"Loading__FullWidth",componentId:"sc-1aisobt-2"})(["width:100%;height:100%;position:relative;overflow:hidden;"]),Ht=function(e){var t=e.className,n=e.finished,c=e.size,i=void 0===c?3:c,a=e.children,o=e.hide,u=void 0!==o&&o;return Object(j.isNil)(n)?Object(r.jsxs)(Ut,{className:t,children:[!u&&a,Object(r.jsx)(Ft,{children:Object(r.jsx)($t,{size:i})})]}):Object(r.jsx)(r.Fragment,{children:a})},Wt=function(e){return e.actorSummary},Vt=Object(L.a)((function(e){return e.graphData}),(function(e){return e.graph})),qt=n(37),Kt=function(e){return e.color},Zt=Object(L.a)(Kt,(function(e){return e.kindDomain})),Xt=Object(L.a)(Kt,(function(e){return e.kindRange})),Yt=Object(L.a)(Kt,(function(e){return e.actorRange})),Jt=Object(L.a)(Zt,Xt,(function(e,t){return V.x().domain(e).range(t)})),Qt=V.x(),en=Object(L.a)(Yt,ae,(function(e,t){var n=Qt.domain();0===n.length&&(n=Object(ue.map)(t,"id"));var r=Qt.range();0===r.length&&(r=e);var c=Object(ue.slice)(r,0,n.length),i=Object(ue.slice)(r,n.length),a=Object(ue.zip)(n,c),o=Object(ue.filter)(a,(function(e){var n=Object(x.a)(e,1)[0];return void 0!==Object(ue.find)(t,(function(e){return e.id===n}))})),u=Object(ue.filter)(a,(function(e){var n=Object(x.a)(e,1)[0];return void 0===Object(ue.find)(t,(function(e){return e.id===n}))})),s=Object(ue.filter)(t,(function(e){return void 0===Object(ue.find)(a,(function(t){var n=Object(x.a)(t,1)[0];return e.id===n}))}));if(u.length>=s.length){var l=Object(ue.unzip)(u),d=Object(x.a)(l,2)[1];o.push.apply(o,Object(qt.a)(Object(ue.zip)(Object(ue.map)(s,"id"),Object(ue.slice)(d,0,s.length))));var b=Object(ue.unzip)(o),f=Object(x.a)(b,2),j=f[0],O=f[1];return j||O?(Qt.range(Object(ue.concat)(O,Object(ue.slice)(d,s.length),i)).domain(j),Qt.copy()):Qt.range([]).domain([]).copy()}var p=Object(ue.unzip)(o),h=Object(x.a)(p,2),v=h[0],g=h[1];return Qt.range(Object(ue.concat)(g,i)).domain(Object(ue.concat)(v,Object(ue.map)(s,"id"))),Qt.copy()})),tn=Object(L.a)((function(e){return e.switch}),(function(e){return"Actor"===e})),nn=Object(L.a)(Jt,Ee,ye,(function(e,t,n){return"event.kind"===(null===n||void 0===n?void 0:n.name)?e:t})),rn=Object(L.a)(tn,nn,en,(function(e,t,n){return e?n:t})),cn=Object(L.a)(tn,Jt,ye,(function(e,t,n){return e||"event.kind"!==(null===n||void 0===n?void 0:n.name)?null:t})),an=Object(L.a)(tn,nn,(function(e,t){return e?void 0:t})),on=Object(L.a)(tn,en,(function(e,t){return e?t:null})),un=Object(L.a)(tn,xe,(function(e,t){return e?function(e){return e.actor.id}:t})),sn=Object(L.a)(tn,en,nn,xe,(function(e,t,n,r){if(e){var c=V.x(t.range().map((function(e){return V.g(e).darker(2).toString()}))).domain(t.domain());return{main:function(e){return t(e.actor.id)},border:function(e){return c(e.actor.id)}}}var i=V.x(n.range().map((function(e){return V.g(e).darker(2).toString()}))).domain(n.domain());return{main:function(e){return n(r(e))},border:function(e){return i(r(e))}}})),ln=Object(f.c)({name:"actor-summary",initialState:null,reducers:{set:function(e,t){return t.payload},reset:function(){return null}}}),dn=ln.reducer,bn=ln.actions,fn=bn.set,jn=bn.reset,On=Object(f.c)({name:"global/highlight",initialState:[],reducers:{reset:function(){return[]},set:function(e,t){var n=t.payload;return Array.isArray(n)?n:[n]}}}),pn=On.reducer,hn=On.actions,vn=hn.reset,gn=hn.set,mn=Object(f.c)({name:"global/selection",initialState:[],reducers:{reset:function(){return[]},set:function(e,t){var n=t.payload;return Array.isArray(n)?n:[n]}}}),xn=mn.reducer,yn=mn.actions,wn=yn.reset,kn=yn.set;function Cn(e){return Object(j.reduce)((function(e,t){return!function(e){return void 0!==e.event}(t)?e.actors[t.actor]=!0:(e.events[t.event]=!0,e.partActors[t.actor]=!0),e}),{events:{},partActors:{},actors:{}},e)}var Mn=function(e){return e.globalHighlight},En=(Object(L.a)(Mn,Cn),function(e){return e.globalSelection}),_n=n(406),Sn=Object(L.a)(re,Me,(function(e,t){return e&&Object(j.filter)(t,e)})),Nn=Object(L.a)(Sn,(function(e){return e.maskGlobalMapBounds}),(function(e,t){if(e){var n=t?Object(H.latLngBounds)(t):null;return Object(j.filter)((function(e){var t=e.place;return!n||!In(t)||n.contains([+t.lat,+t.lng])}),e)}}));function In(e){return!Object(j.isNil)(null===e||void 0===e?void 0:e.lat)&&!Object(j.isNil)(null===e||void 0===e?void 0:e.lng)}Object(L.a)(Nn,Rn);var An=Object(L.a)(Nn,(function(e){return e.maskGlobalTime}),(function(e,t){if(e)return Object(j.filter)((function(e){var n=e.event.datation;if(Object(j.isNil)(n)||0===n.length||Object(j.isNil)(t))return!0;if(1===n.length)return Object(_n.a)(Object(G.a)(n[0].value),t);var r=Object(x.a)(n,2),c=r[0],i=r[1];return!(Object(U.a)(t.end,Object(G.a)(c.value))||Object($.a)(t.start,Object(G.a)(i.value)))}),e)})),Ln=Object(L.a)(An,Rn),Bn=Object(L.a)(An,(function(e){return e&&Object(j.filter)((function(e){return In(e.place)}),e)}));function Rn(e){return e&&Object(j.filter)((function(e){var t=e.event.datation;return!Object(j.isNil)(t)&&t.length>0}),e)}var zn=Object(L.a)(Fe,En,(function(e,t){return Object(ue.isEmpty)(t)?null:t.reduce((function(t,n){var r,c=n.actor;t.actors[c]=!0;var i=null===e||void 0===e||null===(r=e.get(c))||void 0===r?void 0:r.values();return i&&Object(V.u)(i,(function(e,t){return e[t]=!0,e}),t.friends),t}),{actors:{},friends:{}})})),Tn=Object(L.a)(Fe,Mn,(function(e,t){return Object(ue.isEmpty)(t)?null:t.reduce((function(t,n){var r,c=n.actor;t.actors[c]=!0;var i=null===e||void 0===e||null===(r=e.get(c))||void 0===r?void 0:r.values();return i&&Object(V.u)(i,(function(e,t){return e[t]=!0,e}),t.friends),t}),{actors:{},friends:{}})})),Pn=Object(L.a)(An,(function(e){return e&&Object(V.u)(e,(function(e,t){return e[t.event.actor]=!0,e}),{})}));var Dn=function(e){var t=e.id,n=e.label,i=e.x,a=e.y,o=e.width,s=e.height,d=Object(l.b)(),b=Object(l.c)(zn),f=Object(l.c)(Tn),j=Object(l.c)(Pn),O=function(e){var t=Object(l.c)(ae),n=Object(l.c)(on);return n&&t[e]?n(e):void 0}(t),p=Object(c.useMemo)((function(){return{handleClick:function(){d(kn({actor:t}))},handleMouseEnter:function(e){0===e.buttons&&d(gn({actor:t}))},handleMouseLeave:function(){d(vn())}}}),[d,t]),h=p.handleClick,v=p.handleMouseEnter,g=p.handleMouseLeave,m=Object(c.useCallback)((function(e){e.preventDefault(),d(fn({x:i+o,y:a,actor:t}))}),[d,t,i,o,a]),x={opacity:(null===f||void 0===f?void 0:f.actors[t])||!j||j[t]&&(!b||b.friends[t]||b.actors[t])?1:.4},y={fill:null!==O&&void 0!==O?O:(null===b||void 0===b?void 0:b.actors[t])?Lt:void 0,strokeWidth:(null===f||void 0===f?void 0:f.actors[t])?4:(null===b||void 0===b?void 0:b.actors[t])?2:void 0,stroke:(null===b||void 0===b?void 0:b.actors[t])||(null===f||void 0===f?void 0:f.actors[t])?"black":(null===f||void 0===f?void 0:f.friends[t])?"darkgoldenrod":(null===b||void 0===b?void 0:b.friends[t])?"black":void 0},w={fill:O?void 0:(null===b||void 0===b?void 0:b.actors[t])?Nt:void 0};return Object(r.jsxs)("g",Object(u.a)(Object(u.a)({style:Object(u.a)(Object(u.a)({transform:"translate3d(".concat(i,"px, ").concat(a,"px, 0)")},x),{},{transitionDuration:"250ms"}),onMouseEnter:v,onMouseLeave:g,onContextMenu:m},ht(h)),{},{children:[Object(r.jsx)(A,{as:"title",id:t}),Object(r.jsx)(Fn,Object(u.a)({width:o,height:s},y)),Object(r.jsx)(Gn,{dx:o/2,dy:s/2+1,dominantBaseline:"middle",style:Object(u.a)({},w),children:n})]}))},Fn=s.a.rect.withConfig({displayName:"GraphNode__StyledRect",componentId:"sc-j6axuk-0"})(["fill:",";stroke:",";stroke-width:",";"],(function(e){var t=e.fill;return null!==t&&void 0!==t?t:At}),(function(e){return e.stroke}),(function(e){return e.strokeWidth})),Gn=s.a.text.withConfig({displayName:"GraphNode__StyledText",componentId:"sc-j6axuk-1"})(["font-size:12px;text-anchor:middle;user-select:none;"]),$n=n(84),Un="\n&::-webkit-scrollbar-corner {\n  background-color: transparent;\n  border-color: transparent;\n}\n&::-webkit-scrollbar-thumb {\n  border-radius: 10px;\n  background-color: ".concat(Lt,";\n}\n&::-webkit-scrollbar {\n  width: 10px;\n  height: 10px;\n  border-radius: 10px;\n  background-color: ").concat(At,";\n}"),Hn=s.a.div.withConfig({displayName:"styled-components__StyledFlex",componentId:"sc-14fnl78-0"})(["display:flex;"]),Wn=(s.a.div.withConfig({displayName:"styled-components__GrowFlexItem",componentId:"sc-14fnl78-1"})(["flex:1;"]),s.a.div.withConfig({displayName:"styled-components__EnlargeFlex",componentId:"sc-14fnl78-2"})(["flex:1;display:flex;align-items:center;"])),Vn=s.a.div.withConfig({displayName:"IconSpacer",componentId:"sc-osvfn5-0"})(["display:flex;align-items:center;"," ",""],(function(e){return e.spaceRight&&"margin-right: 0.25em;"}),(function(e){return e.spaceLeft&&"margin-left: 0.25em;"})),qn=Object(s.a)(Vn).withConfig({displayName:"IconSpacer__IconSpacerPointer",componentId:"sc-osvfn5-1"})(["cursor:pointer;"]),Kn=function(e){var t=e.className,n=void 0===t?"octicon":t,c=e["aria-label"],i=e.verticalAlign,a=void 0===i?"text-bottom":i;return Object(r.jsx)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor",style:{display:"inline-block",userSelect:"none",verticalAlign:a},"aria-label":c,className:n,children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M4,2 L7,2 L7,14 L4,14 Z M9,2 L12,2 L12,14 L9,14 Z M9,2"})})},Zn=function(e){var t=e.className,n=void 0===t?"octicon":t,c=e["aria-label"],i=e.verticalAlign,a=void 0===i?"text-bottom":i;return Object(r.jsx)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor",style:{display:"inline-block",userSelect:"none",verticalAlign:a},"aria-label":c,className:n,children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M12.8,5.6c0-3.1-2.5-5.6-5.6-5.6S1.6,2.5,1.6,5.6v7.2c-0.9,0-1.6,0.7-1.6,1.6V16l0,0h14.4l0,0v-1.6c0-0.9-0.7-1.6-1.6-1.6 V5.6z M10.4,9.6H4V8h6.4C10.4,8,10.4,9.6,10.4,9.6z M10.4,6.4H4V4.8h6.4C10.4,4.8,10.4,6.4,10.4,6.4z"})})},Xn=function(e){return Object(s.a)(e).withConfig({displayName:"getEventIcon__styleIcon",componentId:"sc-1cnyn4d-0"})((function(e){var t=e.iconColor;return t?"color: ".concat(t,";"):""}))},Yn={Birth:Xn(y.m),Death:Xn(Zn),Education:Xn(y.a),ObtainQualification:Xn(y.k),PassageExamen:Xn(y.b),Retirement:Xn(y.i),SuspensionActivity:Xn(Kn)};var Jn=function(e){var t;return null!==(t=Yn[e])&&void 0!==t?t:Xn(y.n)},Qn={Birth:"Naissance",Death:"D\xe9c\xe8s",Education:"Enseignement",ObtainQualification:"Obtention de qualit\xe9",PassageExamen:"Passage d'un examen",Retirement:"Retraite",SuspensionActivity:"Suspension d'activit\xe9"};var er=function(e){return Qn[e]},tr=document.getElementById("modals"),nr=function(e){var t=e.children;return o.a.createPortal(t,tr)};function rr(e){return e.getBoundingClientRect()}var cr=function(e){var t=Object(c.useState)((function(){return e.current?rr(e.current):null})),n=Object(x.a)(t,2),r=n[0],i=n[1];return Object(c.useLayoutEffect)((function(){e.current&&i(rr(e.current))}),[e]),r};function ir(e,t,n){switch(n){case"north":return{left:e.left+e.width/2-t.width/2,top:e.top-(t.height+4)};case"north-east":return{left:e.right+8,top:e.top-4};case"north-west":return{left:e.left-(t.width+8),top:e.top+4};case"south-west-right":return{left:e.right-t.width,top:e.bottom+4}}}function ar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"north",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lr,r=Object(c.useRef)(null),i=ur(r,e,t,n),a=Object(x.a)(i,3),o=a[0],u=a[1],s=a[2];return[o,r,u,s]}function or(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"north",r=Object(c.useState)(!1),i=Object(x.a)(r,2),a=i[0],o=i[1],u=Object(c.useState)(void 0),s=Object(x.a)(u,2),l=s[0],d=s[1];return Object(c.useLayoutEffect)((function(){if(a){var r=rr(e.current),c=rr(t.current);d(ir(r,c,n))}else d(void 0)}),[a,n,e,t]),[a?l:{display:"none"},b,f];function b(){o(!0)}function f(){o(!1)}}function ur(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"north",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lr,a=Object(c.useRef)(null),o=Object(c.useState)(!1),u=Object(x.a)(o,2),s=u[0],l=u[1],d=Object(c.useState)(void 0),b=Object(x.a)(d,2),f=b[0],j=b[1];return Object(c.useLayoutEffect)((function(){if(s){var t=rr(e.current),r=rr(a.current);j(ir(t,r,n))}else j(void 0)}),[s,n,e]),[Object(r.jsx)(nr,{children:Object(r.jsx)(i,{ref:a,style:s?f:{display:"none"},children:t})}),O,p];function O(){l(!0)}function p(){l(!1)}}var sr=function(e){var t=e.as,n=void 0===t?lr:t,c=e.content,i=e.children,a=e.position,o=ar(c,void 0===a?"north":a,n),u=Object(x.a)(o,4),s=u[0],l=u[1],d=u[2],b=u[3];return Object(r.jsxs)(r.Fragment,{children:[i(l,d,b),s]})},lr=s.a.div.withConfig({displayName:"Popper__BlackPopper",componentId:"sc-12b9w4a-0"})(["z-index:9999;top:0;position:absolute;background-color:",";border-radius:3px;color:white;padding:0.5em;font-size:12px;line-height:1.2;"],Lt),dr=s.a.time.withConfig({displayName:"ProsoVisDateComponent__StyledTime",componentId:"sc-1txefjp-0"})(["white-space:nowrap;font-size:12px;"]),br=function(e){var t=e.datation,n=e.showTooltip,c=void 0===n||n,i=e.className;return c?Object(r.jsx)(sr,{content:"".concat(t.kind," - ").concat(t.value),children:function(e,n,c){return Object(r.jsx)(dr,{"aria-label":"".concat(t.kind," - ").concat(t.value),dateTime:t.value,"data-uri":t.uri,ref:e,className:i,onMouseEnter:n,onFocus:n,onMouseLeave:c,onBlur:c,children:t.label})}}):Object(r.jsx)(dr,{"aria-label":"".concat(t.kind," - ").concat(t.value),dateTime:t.value,"data-uri":t.uri,className:i,children:t.label})},fr=s.a.div.withConfig({displayName:"ProsoVisDateComponent__EventDateBase",componentId:"sc-1txefjp-1"})(["text-align:right;"]),jr=Object(s.a)(fr).withConfig({displayName:"ProsoVisDateComponent__WrapEventDate",componentId:"sc-1txefjp-2"})(["display:flex;flex-wrap:wrap;max-width:7em;justify-content:flex-end;"]),Or=Object(s.a)(br).withConfig({displayName:"ProsoVisDateComponent__SpacedDateLabel",componentId:"sc-1txefjp-3"})(["margin-left:0.5em;"]),pr=function(e){var t=e.dates,n=e.showTooltip;return Object(j.isNil)(t)||0===t.length?null:1===t.length?Object(r.jsx)(fr,{children:Object(r.jsx)(br,{datation:t[0],showTooltip:n})}):(t.length>2&&console.error("there is more than two dates",t),Object(r.jsxs)(jr,{children:[Object(r.jsx)(br,{datation:t[0],showTooltip:n}),Object(r.jsx)(Or,{datation:t[1],showTooltip:n})]}))},hr=function(e){var t=e.kind,n=e.events,c=e.datation,i=Object(l.c)(cn),a=Jn(t);return Object(r.jsxs)(vr,{children:[Object(r.jsxs)("span",{children:[n,"x"]}),Object(r.jsx)(Vn,{spaceLeft:!0,spaceRight:!0,children:Object(r.jsx)(a,{iconColor:i?i(t):"black","aria-label":t})}),Object(r.jsx)(gr,{children:er(t)}),c.length>0&&Object(r.jsx)(pr,{dates:c})]})},vr=Object(s.a)(Hn).withConfig({displayName:"SummaryEvent__StyledEventLine",componentId:"sc-1ho5lya-0"})(["align-items:center;"]),gr=s.a.span.withConfig({displayName:"SummaryEvent__StyledSpan",componentId:"sc-1ho5lya-1"})(["flex:1;"]),mr=Object(j.sortBy)("datation[0].value"),xr=function(e,t){var n=Object(j.last)(e);(null===n||void 0===n?void 0:n.kind)===t.kind?n.events.push(t):e.push({kind:t.kind,events:[t]})},yr=Object(j.minBy)("value"),wr=Object(j.maxBy)("value"),kr=function(e){var t=Object(j.flatMap)("datation",e.events),n=yr(t),r=wr(t);return Object(u.a)(Object(u.a)({},e),{},{datation:Object(j.compact)(n===r?[n]:[n,r])})},Cr=s.a.div.withConfig({displayName:"SummaryEvents__Base2",componentId:"sc-1qyntea-0"})(["height:100%;width:100%;padding-right:0.25em;padding-left:0.25em;overflow-y:auto;",""],Un),Mr=function(e){var t=e.events,n=Object(c.useMemo)((function(){return Object(j.pipe)(mr,Object(j.transform)(xr,[]),Object(j.map)(kr),Object(j.map)((function(e){var t=e.kind,n=e.events,c=e.datation;return Object(r.jsx)(hr,{kind:t,events:n.length,datation:c},n[0].id)})))(t)}),[t]);return Object(r.jsx)(Cr,{children:n})},Er=function(e){var t=e.actor,n=Object(l.b)(),i=void 0!==Object(l.c)(ae)[t],a=Object(c.useMemo)((function(){return i?[function(){n(at(t)),n(jn())},Object(r.jsx)(y.p,{className:"ma1 flex-shrink-0 red",verticalAlign:"text-bottom","aria-label":"supprimer"})]:[function(){n(ot(t)),n(jn())},Object(r.jsx)(y.m,{className:"ma1 flex-shrink-0 green",verticalAlign:"text-bottom","aria-label":"ajouter"})]}),[n,i,t]),o=Object(x.a)(a,2),s=o[0],d=o[1];return Object(r.jsxs)(_r,{children:[Object(r.jsx)(qn,Object(u.a)(Object(u.a)({spaceRight:!0},ht(s)),{},{children:d})),Object(r.jsx)(A,{id:t})]})},_r=Object(s.a)(Hn).withConfig({displayName:"SummaryHeader__ActorTitle",componentId:"sc-17q0109-0"})(["border-bottom:1px solid ",";"],At),Sr=s.a.div.withConfig({displayName:"SummaryWindow__Base",componentId:"sc-1gjsamp-0"})(["display:grid;grid-template-rows:auto 1fr;width:100%;height:100%;background-color:white;border:1px solid gray;border-radius:3px;box-shadow:0 0 3px gray;"]),Nr=function(e){var t=e.target,n=t.x,i=t.y,a=t.actor,o=Object(c.useRef)(null),u=Object($n.useSpring)((function(){return{width:0,height:0,reset:!0}})),s=Object(x.a)(u,2),d=s[0],b=d.width,f=d.height,O=s[1];Object(c.useLayoutEffect)((function(){O({from:{width:0,height:0},width:250,height:300})}),[a,O]),Object(c.useEffect)((function(){var e=o.current;return e.addEventListener("wheel",pt),function(){e.removeEventListener("wheel",pt)}}),[]);var p=Object(l.c)(ce),h=Object(c.useMemo)((function(){var e;return null===(e=Object(j.get)(a,p))||void 0===e?void 0:e.map((function(e){return e.event}))}),[a,p]);return Object(r.jsx)($n.animated.foreignObject,{ref:o,style:{transform:"translate3d(".concat(n,"px, ").concat(i,"px, 0)")},width:b,height:f,onMouseUp:pt,children:Object(r.jsxs)(Sr,{children:[Object(r.jsx)(Er,{actor:a}),Object(r.jsx)(Ht,{finished:h,hide:!0,children:Object(r.jsx)(Mr,{events:h})})]})})},Ir=n(212);var Ar=function(e){var t=e.graph,n=function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null),r=cr(t),i=Object(c.useMemo)((function(){return r?(r.width-r.width/10)/e.x:1}),[r,e.x]);return Object(c.useLayoutEffect)((function(){var e=Object(V.C)(n.current),r=new Ir.EasyPZ(t.current,(function(t){e.style("transform","translate3d(".concat(t.translateX,"px, ").concat(t.translateY,"px, 0) scale(").concat(t.scale*i,")"))}),{minScale:1},["SIMPLE_PAN","WHEEL_ZOOM","PINCH_ZOOM"]);return function(){r.removeHostListeners()}}),[i]),{$svg:t,$g:n,baseScale:i,viewBox:r?[-r.width/20,0,r.width,i*e.y].join(" "):void 0}}(function(e){return Object(c.useMemo)((function(){return e.reduce((function(e,t){var n=t.x+t.width/2,r=t.y+t.height/2;return(null===e.x||n>e.x)&&(e.x=n),(null===e.y||r>e.y)&&(e.y=r),e}),{x:null,y:null})}),[e])}(t)),i=n.$svg,a=n.$g,o=n.baseScale,s=n.viewBox,d=Object(l.c)(Wt);return Object(r.jsx)("svg",{ref:i,width:"100%",height:"100%",viewBox:s,children:Object(r.jsxs)("g",{ref:a,style:{transform:"scale(".concat(o,")")},children:[t.map((function(e){var t=e.id,n=e.x,c=e.y,i=Object(k.a)(e,["id","x","y"]);return Object(r.jsx)(Dn,Object(u.a)({id:t,x:n-i.width/2,y:c-i.height/2},i),t)})),d&&Object(r.jsx)(Nr,{target:d})]})})},Lr=function(){var e=Object(l.c)(Vt),t=Object(l.c)($e);return Object(r.jsx)(Ht,{finished:e&&t,children:e&&Object(r.jsx)(Ar,{graph:e})})},Br=i.a.createContext({}),Rr=function(){return Object(c.useContext)(Br)},zr=Br.Provider;var Tr=function(e){var t=e.defaultBounds,n=e.options,i=e.children,a=e.onMoveEnd,o=e.onZoomEnd,s=e.mappy,l=Object(c.useRef)(null),d=function(e,t,n){var r=Object(c.useState)(),i=Object(x.a)(r,2),a=i[0],o=i[1];return St((function(){var r=new W.a.Map(e.current,Object(u.a)({},n));return r.fitBounds(t),o({top:r,current:r}),function(){r.remove()}})),a}(l,t,n);return Object(c.useEffect)((function(){d&&s&&s(d.top)}),[s,d]),Object(c.useEffect)((function(){if(d&&o){var e=d.top;return e.on("zoomend",o),function(){e.off("zoomend")}}}),[o,d]),Object(c.useEffect)((function(){if(d&&a){var e=d.top;return e.on("moveend",a),function(){e.off("moveend")}}}),[a,d]),Object(r.jsx)("div",{ref:l,children:d&&Object(r.jsx)(zr,{value:d,children:i})})},Pr=i.a.createContext(null),Dr=function(){return Object(c.useContext)(Pr)},Fr=function(e){var t=e.children,n=Rr(),i=Object(c.useRef)(W.a.control.layers());return St((function(){var e=i.current;return e.addTo(n.top),function(){e.remove()}})),Object(r.jsx)(Pr.Provider,{value:i.current,children:t})},Gr=i.a.createContext(null),$r=function(){return Object(c.useContext)(Gr)},Ur=function(e){var t=e.name,n=e.checked,c=void 0===n||n,i=e.children,a=Rr(),o=Dr();return Object(r.jsx)(Gr.Provider,{value:Object.assign((function(e){return c&&e.addTo(a.top),o.addOverlay(e,t)}),{control:o}),children:i})},Hr=function(e){var t=e.name,n=e.checked,c=void 0!==n&&n,i=e.children,a=Rr(),o=Dr();return Object(r.jsx)(Gr.Provider,{value:function(e){return c&&e.addTo(a.top),o.addBaseLayer(e,t)},children:i})},Wr=function(e){var t=e.url,n=(e.children,Object(k.a)(e,["url","children"])),r=Rr(),c=$r();return St((function(){var e=W.a.tileLayer(t,n);return c?c(e):e.addTo(r.current),function(){e.remove()}})),null},Vr=Object(f.c)({name:"mask-global-map-bounds",initialState:null,reducers:{set:function(e,t){return t.payload},clear:function(){return null}}}),qr=Vr.reducer,Kr=Vr.actions,Zr=Kr.set,Xr=(Kr.clear,n(13)),Yr=n(20),Jr=n(25),Qr=n(27),ec=n(28),tc=n(122),nc=n.n(tc);function rc(e){return{minX:e.x-e.r,minY:e.y-e.r,maxX:e.x+e.r,maxY:e.y+e.r}}function cc(e,t){var n=e.x*e.n+t.x*t.n,r=e.y*e.n+t.y*t.n,c=e.n+t.n;return function(e,t,n,r,c){var i={x:e,y:t,r:Math.sqrt(n),n:n,children:r};c&&(i.data=c);return i}(n/c,r/c,c,[e,t])}function ic(e,t){return Math.pow(e.r+t.r,2)-(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var ac=function(e){Object(Qr.a)(n,e);var t=Object(ec.a)(n);function n(){return Object(Yr.a)(this,n),t.apply(this,arguments)}return Object(Jr.a)(n,[{key:"toBBox",value:function(e){return rc(e.v)}},{key:"compareMinX",value:function(e,t){return e.v.x-e.v.r-(t.v.x-t.v.r)}},{key:"compareMinY",value:function(e,t){return e.v.y-e.v.r-(t.v.y-t.v.r)}}]),n}(nc.a),oc=function(e){return{v:e}};var uc=.5;function sc(e){return{minX:e.x-e.r-uc,minY:e.y-e.r-uc,maxX:e.x+e.r+uc,maxY:e.y+e.r+uc}}function lc(e,t){return Math.pow(e.r+t.r+1,2)-(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var dc=function(e){Object(Qr.a)(n,e);var t=Object(ec.a)(n);function n(){return Object(Yr.a)(this,n),t.apply(this,arguments)}return Object(Jr.a)(n,[{key:"toBBox",value:function(e){return sc(e.v)}},{key:"compareMinX",value:function(e,t){return e.v.x-e.v.r-(t.v.x-t.v.r)}},{key:"compareMinY",value:function(e,t){return e.v.y-e.v.r-(t.v.y-t.v.r)}}]),n}(nc.a),bc=0;function fc(e,t,n,r,c){var i,a=null!==(i=r&&r[0].id||c&&c.event.id)&&void 0!==i?i:""+bc++,o=r?Math.max(r[0].depth,r[1].depth)+1:0,u={id:a,x:e,y:t,r:Math.sqrt(n)+5,n:n,children:r,depth:o};return c&&(u.data=c),u}function jc(e,t){var n=e.x*e.n+t.x*t.n,r=e.y*e.n+t.y*t.n,c=e.n+t.n;return fc(n/c,r/c,c,[e,t])}var Oc=function(){var e={stop:!1,instance:0};return Object.assign((function(t,n){var r;if(0===t.length)return[];var c=++e.instance;if(c===e.instance){var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.merge,r=void 0===n?cc:n,c=t.overlap,i=void 0===c?ic:c,a=t.bbox,o=void 0===a?rc:a,u=t.Rbush,s=void 0===u?ac:u,l=t.brk,d=void 0!==l&&l,b=t.reverse,f=void 0!==b&&b,j=t.sort,O=void 0===j||j,p=e.map(oc),h=new Set(p),v=new s;v.load(p);var g,m=Object(Xr.a)(h);try{for(m.s();!(g=m.n()).done;){for(var x=g.value,y=!1,w=!0,k=x.v;w;){w=!1;var C=v.search(o(k)),M=new Uint32Array(C.length);!function(){for(var e=new Float64Array(C.length),t=0;t<C.length;t++)M[t]=t,e[t]=i(k,C[t].v);O&&M.sort((function(t,n){return e[n]-e[t]}))}();var E,_=f?M.reverse():M,S=Object(Xr.a)(_);try{for(S.s();!(E=S.n()).done;){var N=E.value,I=C[N];if(x!==I&&i(k,I.v)>0&&(y||(y=!0),k=r(k,I.v),h.delete(I),v.remove(I),w||(w=!0),d))break}}catch(A){S.e(A)}finally{S.f()}}y&&(v.remove(x),x.v=k,v.insert(x))}}catch(A){m.e(A)}finally{m.f()}return Array.from(h,(function(e){return e.v}))}(t.map((function(e){var t=n.latLngToLayerPoint(e.place);return fc(t.x,t.y,1,null,e)})),{merge:jc,overlap:lc,bbox:sc,Rbush:dc});if(c===e.instance)return(null===(r=Object(V.n)({children:i}).children)||void 0===r?void 0:r.map((function(e){var t=e.data,n=t.id,r=(t.depth,Object(k.a)(t,["id","depth"]));return Object(u.a)(Object(u.a)({},r),{},{id:n,children:e.leaves().map((function(e){return e.data.data}))})})))||[]}}),{stop:function(){e.stop=!0}})}(),pc=function(e){var t=e.children,n=Rr(),c=$r(),i=d((function(){return W.a.featureGroup([])}));return St((function(){var e=i.current;return c?c(e):e.addTo(n.current),function(){e.remove()}})),Object(r.jsx)(zr,{value:{top:n.top,current:i.current},children:t})},hc=function(e){var t=e.latlng,n=e.children,r=e.radius,i=Object(k.a)(e,["latlng","children","radius"]),o=Rr(),u=d((function(){var e=document.createElement("div");return e.style.fontSize="0",e})),s=d((function(){return new W.a.Marker(t,i)}));return St((function(){var e=s.current.addTo(o.current);return e.setIcon(W.a.divIcon({html:u.current,className:"",iconSize:[2*r,2*r]})),function(){e.remove(),e.removeFrom(o.top),e.removeFrom(o.current)}})),Object(c.useLayoutEffect)((function(){s.current.setLatLng(t)}),[s,t]),Object(c.useLayoutEffect)((function(){s.current.setIcon(W.a.divIcon({html:u.current,className:"",iconSize:[2*r,2*r]}))}),[u,s,r]),Object(a.createPortal)(n,u.current)},vc=function(e){var t=e.radius,n=e.counts,i=e.donut,a=void 0===i?0:i,o=e.children,u=Object(c.useMemo)((function(){return V.t().sort(null).value((function(e){return e[1].length}))(n)}),[n]),s=Object(c.useMemo)((function(){return V.a().innerRadius(a).outerRadius(a+t)}),[t,a]);return Object(r.jsx)("g",{stroke:"white",pointerEvents:"initial",children:Object(ue.map)(u,(function(e){return o(e,s,a)}))})},gc=Object(L.a)(Mn,En,(function(e,t){return Cn(0!==e.length?e:t)})),mc=(Object(L.a)(gc,(function(e){return Object(j.isEmpty)(e.events)&&Object(j.isEmpty)(e.actors)})),function(e){var t=e.a,n=e.arc,i=e.radius,a=Object(l.b)(),o=Object(l.c)(an),s=Object(x.a)(t.data,2),d=s[0],b=s[1],f=Object(c.useMemo)((function(){return Object(j.map)((function(e){var t=e.event;return{event:t.id,actor:t.actor}}),b)}),[b]),O=Object(c.useMemo)((function(){return[function(){a(kn(f))},function(){a(gn(f))},function(){a(vn())}]}),[a,f]),p=Object(x.a)(O,3),h=p[0],v=p[1],g=p[2],m=n(t);return Object(r.jsxs)("g",Object(u.a)(Object(u.a)({},ht(h)),{},{onMouseEnter:v,onMouseLeave:g,fill:o?o(d):Lt,children:[Object(r.jsx)("path",{opacity:.3,d:m,children:Object(r.jsx)("title",{children:b.length})}),Object(r.jsx)(wc,{a:t,defaultD:m,radius:i,children:Object(r.jsx)("title",{children:b.length})})]}))}),xc=Object(V.z)(),yc=Object(V.a)(),wc=function(e){var t=e.a,n=e.radius,i=e.children,a=e.defaultD,o=Object(l.c)(gc),u=t.startAngle,s=t.endAngle,d=Object(x.a)(t.data,2)[1],b=Object(c.useMemo)((function(){if(Object(ue.isEmpty)(o.events)&&Object(ue.isEmpty)(o.actors))return a;var e=n*xc(Object(j.sumBy)((function(e){var t=e.event;return o.events[t.id]||o.actors[t.actor]?1:0}),d)/d.length);return yc({startAngle:u,endAngle:s,innerRadius:0,outerRadius:e<5&&0!==e?5:e})}),[u,s,n,d,o,a]);return Object(r.jsx)("path",{d:b,children:i})},kc=function(e){var t=e.locs,n=Rr().top,i=Object(c.useState)(),a=Object(x.a)(i,2),o=a[0],u=a[1];return Object(c.useEffect)((function(){var e=Oc(t,n);return e&&u(e),function(){Oc.stop()}}),[t,n]),o?Object(r.jsx)(pc,{children:o.map((function(e){return Object(r.jsx)(Cc,{value:e},e.id)}))}):null},Cc=function(e){var t=e.value,n=t.r,i=t.x,a=t.y,o=Rr().top,u=Object(l.c)(xe),s=Object(c.useMemo)((function(){return Object(V.E)(Object(V.m)(t.children,u),(function(e){return e[0]}))}),[t.children,u]);return Object(r.jsx)(hc,{latlng:Object(c.useMemo)((function(){return o.layerPointToLatLng([i,a])}),[o,i,a]),radius:n,children:Object(r.jsx)("svg",{viewBox:"".concat(-n," ").concat(-n," ").concat(2*n," ").concat(2*n),children:Object(r.jsx)(vc,{radius:n,counts:s,children:function(e,t){return Object(r.jsx)(mc,{a:e,arc:t,radius:n},e.data[0])}})})})},Mc=function(e){var t=e.locs,n=Object(l.b)(),i=Object(c.useState)((function(){return Object(H.latLngBounds)(Object(j.map)((function(e){return e.place}),t))})),a=Object(x.a)(i,1)[0],o=Object(c.useCallback)((function(e){var t=e.target.getBounds(),r=t.getSouthWest(),c=t.getNorthEast();n(Zr([{lat:r.lat,lng:r.lng},{lat:c.lat,lng:c.lng}]))}),[n]);return Object(r.jsx)(Tr,{defaultBounds:a,options:{maxZoom:15},onMoveEnd:o,children:Object(r.jsxs)(Fr,{children:[Object(r.jsx)(Ec,{}),Object(r.jsx)(Ur,{name:"markers",children:Object(r.jsx)(kc,{locs:t})})]})})},Ec=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Hr,{name:"OpenStreetMap",children:Object(r.jsx)(Wr,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})}),Object(r.jsx)(Hr,{name:"Esri.WorldTopoMap",children:Object(r.jsx)(Wr,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles \xa9 Esri \u2014 Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"})}),Object(r.jsx)(Hr,{name:"CartoDB.Positron",children:Object(r.jsx)(Wr,{url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19})}),Object(r.jsx)(Hr,{name:"CartoDB.Voyager",checked:!0,children:Object(r.jsx)(Wr,{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19})})]})},_c=function(){var e=Object(l.c)(Bn);return Object(r.jsx)(Ht,{finished:e,hide:!0,children:Object(r.jsx)(Mc,{locs:e})})},Sc={top:10,right:20,bottom:20,left:30},Nc=250,Ic=V.L.range(new Date(1700,0,1),new Date(2e3,0,1)).map((function(e){return{time:e,value:""}})),Ac=Object(L.a)(Sn,xe,Bc),Lc=Object(L.a)(Ln,xe,Bc);function Bc(e,t){if(!Object(j.isNil)(e))return Object(j.pipe)(Object(j.flatMap)(function(e){return function(t){var n;if(Object(j.isNil)(t.event.datation))return[];if(2===t.event.datation.length){var r=Object(j.map)(Object(j.pipe)((function(e){return e.value}),G.a,V.L.floor),t.event.datation),c=Object(x.a)(r,2),i=c[0],a=c[1];return Object(V.M)(i,V.K.offset(a,1)).map((function(n){return{value:e(t),time:n}}))}return 1===(null===(n=t.event.datation)||void 0===n?void 0:n.length)?[{value:e(t),time:Object(j.pipe)(G.a,V.L)(t.event.datation[0].value)}]:[]}}(t)),Object(j.concat)(Ic),Object(j.groupBy)(Object(j.pipe)((function(e){return+e.time}))),Object(j.map)((function(e){var t;return{time:null===(t=Object(j.first)(e))||void 0===t?void 0:t.time,value:e.filter((function(e){return e.value}),e)}})))(e)}var Rc=Object(j.pipe)(Object(j.map)((function(e){var t=e.time,n=e.value;return{time:t,value:Object(j.countBy)((function(e){return e.value}),n)}})),Object(j.sortBy)((function(e){return e.time})));function zc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.noop,t=Object(c.useRef)(null),n=Object(c.useCallback)((function(n){n&&(t.current=V.C(n).call(e))}),[]);return[t,n]}var Tc=function(e){var t=e.scale,n=Object(x.a)(e.position,2),i=n[0],a=n[1],o=e.axis,u=zc(),s=Object(x.a)(u,2),l=s[0],d=s[1];return Object(c.useEffect)((function(){l.current.transition().call(o(t))}),[l,t,o]),Object(r.jsx)("g",{ref:d,className:"axis",pointerEvents:"none",style:{transform:"translate3d(".concat(i,", ").concat(a,", 0)")}})},Pc=s.a.g.withConfig({displayName:"styled__StyledG",componentId:"sc-v72f0b-0"})([".selection{fill-opacity:0;}"]),Dc=function(e,t,n,r){var c=e.selectAll(".handle--custom").data([{type:"w"},{type:"e"}]).join((function(e){var t=e.append("g").attr("class","handle--custom").attr("shape-rendering","crispEdges");return t.append("path").attr("fill",Lt).attr("cursor","ew-resize").attr("d",n).style("transform","translate3d(0, 5px, 0)"),t.append("path").attr("fill",Lt).attr("cursor","ew-resize").attr("d",V.I().type(V.J)).style("transform","translate3d(1px, ".concat(r-5,"px, 0)")),t.append("path").attr("fill",Lt).attr("cursor","ew-resize").attr("d",V.I().type(V.J)).style("transform","rotate(180deg) translate3d(-1px, -5px, 0)"),t}));null===t?c.style("transform",null):c.style("transform",(function(e,n){return"translate3d(".concat(t[n]-1,"px, 0, 0)")}))};var Fc=function(e){var t=e.onBrush,n=e.x,i=e.sync,a=e.margin,o=e.width,u=e.height,s=Object(c.useMemo)((function(){return V.f()}),[]),l=zc(s),d=Object(x.a)(l,2),b=d[0],f=d[1],j=function(e){return Object(c.useMemo)((function(){return V.q().context(null)([[0,0],[2,0],[2,e-10],[0,e-10],[0,0]])}),[e])}(u);return Object(c.useEffect)((function(){s.extent([[a.left,a.top],[o-a.right,u-a.bottom]]),b.current.call(Dc,[a.left,o-a.right],j,u).call(s).call(s.move,[a.left,o-a.right])}),[s,j,b,o,u,a]),Object(c.useEffect)((function(){i&&b.current.call(s.move,i.map(n))}),[s,b,i,n]),Object(c.useEffect)((function(){return s.on("start brush end",(function(e){if(e.selection&&(V.C(this).call(Dc,e.selection,j,u),e.sourceEvent)){var r=e.selection.map(n.invert),c=Object(x.a)(r,2),i=c[0],a=c[1];t(i,a)}})),function(){s.on("start brush end",null)}}),[s,j,t,u,n]),Object(r.jsx)(Pc,{ref:f})};var Gc=function(e){var t=e.x,n=e.y,i=e.stack,a=e.color,o=e.curve,u=void 0===o?V.i:o,s=e.defaultColor,l=void 0===s?Tt.darkgray:s,d=function(){var e=Object(c.useRef)(null),t=Object(c.useCallback)((function(t){t&&(e.current=Object(V.C)(t))}),[]);return[e,t]}(),b=Object(x.a)(d,2),f=b[0],j=b[1],O=Object(c.useMemo)((function(){return Object(V.b)().x((function(e){return t(e.data.time)})).y0((function(e){return n(e[0])})).y1((function(e){return n(e[1])})).curve(u)}),[t,n,u]),p=Object(c.useCallback)((function(e){return a?a(e.key):l}),[a,l]);return Object(c.useEffect)((function(){f.current.selectAll("path").data(i,(function(e){return e.key})).join((function(e){return e.append("path").attr("fill",p).attr("d",O).call((function(e){return e.append("title").text((function(e){return e.key}))}))}),(function(e){return e.call((function(e){return e.transition().attr("fill",p).attr("d",O).select("title").text((function(e){return e.key}))}))}))}),[f,i,p,O]),Object(r.jsx)("g",{ref:j})},$c=Object(f.c)({name:"mask-global-time",initialState:null,reducers:{set:function(e,t){var n=t.payload;return{start:+n.start,end:+n.end}},clear:function(){return null}}}),Uc=$c.reducer,Hc=$c.actions,Wc=Hc.set;Hc.clear;var Vc=function(e){var t=e.width,n=e.stack,i=e.reference,a=Object(l.c)(an),o=Object(c.useMemo)((function(){var e=null===a||void 0===a?void 0:a.copy();return e?(e.range(e.range().map((function(e){var t=Object(V.o)(e);return t.c=0,t.formatRgb()}))),e):null}),[a]),u=function(){var e=Object(l.b)();return Object(c.useMemo)((function(){return Object(j.throttle)(100,(function(t,n){e(Wc({start:t,end:n}))}))}),[e])}(),s=Object(c.useMemo)((function(){return Object(V.A)().domain([Object(G.a)("1700-01-01"),Object(G.a)("2000-01-01")]).range([Sc.left,t-Sc.right]).nice().clamp(!0)}),[t]),d=Object(c.useMemo)((function(){return Object(V.v)().domain([Object(V.s)(i,(function(e){return Object(V.s)(e,(function(e){return e[0]}))})),Object(V.r)(i,(function(e){return Object(V.r)(e,(function(e){return e[1]}))}))]).range([Nc-Sc.bottom,Sc.top])}),[i]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Gc,{stack:i,color:o,x:s,y:d,defaultColor:At}),Object(r.jsx)(Gc,{stack:n,color:null!==a&&void 0!==a?a:null,x:s,y:d}),Object(r.jsx)(Tc,{scale:s,position:["0",Nc-Sc.bottom+"px"],axis:V.c}),Object(r.jsx)(Tc,{scale:d,position:[Sc.left+"px","0"],axis:V.d}),Object(r.jsx)(Fc,{width:t,height:Nc,margin:Sc,x:s,onBrush:u})]})};var qc=function(){var e=Object(c.useRef)(null),t=cr(e),n=Object(l.c)(Lc),i=Object(l.c)(Ac),a=Object(l.c)(we),o=Object(c.useMemo)((function(){return i&&Object(V.F)().keys(a).order(V.G).value((function(e,t){return e.value[t]||0}))(Rc(i))}),[i,a]),u=Object(c.useMemo)((function(){return n&&o&&(e=o,t=Rc(n),Object(V.u)(t,(function(t,n,r){return Object(V.u)(e,(function(e,t,c){var i;e[c]||(e[c]=[],e[c].key=t.key,e[c].index=t.index);var a=Object(x.a)(t[r],1)[0],o=null!==(i=n.value[t.key])&&void 0!==i?i:0;return e[c][r]=[a,o+a],e[c][r].data=n,e}),t)}),[]));var e,t}),[n,o]);return Object(r.jsx)(Ht,{finished:u,children:Object(r.jsx)("svg",{height:Nc,width:"100%",ref:e,children:(null===t||void 0===t?void 0:t.width)&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(Vc,{width:t.width,stack:null!==u&&void 0!==u?u:[],reference:null!==o&&void 0!==o?o:[]}),","]})})})},Kc=n(18),Zc=n.n(Kc),Xc=n(39),Yc=n(40),Jc=n.n(Yc),Qc=Object(f.b)("actors/fetch",function(){var e=Object(Xc.a)(Zc.a.mark((function e(t,n){var r,c,i;return Zc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.signal,c=Jc.a.CancelToken.source(),r.addEventListener("abort",(function(){c.cancel()})),e.next=5,Jc.a.get("./data/index-actors.json",{cancelToken:c.token});case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ei=Object(f.c)({name:"actors",initialState:{loading:"idle",url:"./data/index-actors.json"},reducers:{setUrl:function(e,t){var n=t.payload;e.url=n}},extraReducers:function(e){e.addCase(Qc.pending,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"pending"})})),e.addCase(Qc.fulfilled,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{loading:"pending",actors:t.payload})})),e.addCase(Qc.rejected,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"failed"})}))}}).reducer,ti=Object(f.b)("events/fetch",function(){var e=Object(Xc.a)(Zc.a.mark((function e(t,n){var r,c,i;return Zc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.signal,c=Jc.a.CancelToken.source(),r.addEventListener("abort",(function(){c.cancel()})),e.next=5,Jc.a.get("./data/index-events.json",{cancelToken:c.token});case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ni=Object(f.c)({name:"events",initialState:{loading:"idle",url:"./data/index-events.json"},reducers:{setUrl:function(e,t){var n=t.payload;e.url=n}},extraReducers:function(e){e.addCase(ti.pending,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"pending"})})),e.addCase(ti.fulfilled,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{loading:"idle",events:t.payload})})),e.addCase(ti.rejected,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"failed"})}))}}).reducer,ri=Object(f.b)("graph/fetch",function(){var e=Object(Xc.a)(Zc.a.mark((function e(t,n){var r,c,i;return Zc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.signal,c=Jc.a.CancelToken.source(),r.addEventListener("abort",(function(){c.cancel()})),e.next=5,Jc.a.get("./data/graph.json",{cancelToken:c.token});case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ci=Object(f.c)({name:"graph",initialState:{graph:null,loading:"idle",url:"./data/graph.json"},reducers:{setUrl:function(e,t){var n=t.payload;e.url=n}},extraReducers:function(e){e.addCase(ri.pending,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"pending"})})),e.addCase(ri.fulfilled,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{loading:"idle",graph:t.payload})})),e.addCase(ri.rejected,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"failed"})}))}}).reducer,ii=Object(f.b)("localisations/fetch",function(){var e=Object(Xc.a)(Zc.a.mark((function e(t,n){var r,c,i;return Zc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.signal,c=Jc.a.CancelToken.source(),r.addEventListener("abort",(function(){c.cancel()})),e.next=5,Jc.a.get("./data/index-localisations.json",{cancelToken:c.token});case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ai=Object(f.c)({name:"localisations",initialState:{loading:"idle",url:"./data/index-localisations.json"},reducers:{setUrl:function(e,t){var n=t.payload;e.url=n}},extraReducers:function(e){e.addCase(ii.pending,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"pending"})})),e.addCase(ii.fulfilled,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{loading:"idle",localisations:t.payload})})),e.addCase(ii.rejected,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"failed"})}))}}).reducer,oi=Object(f.b)("relations/fetch",function(){var e=Object(Xc.a)(Zc.a.mark((function e(t,n){var r,c,i;return Zc.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.signal,c=Jc.a.CancelToken.source(),r.addEventListener("abort",(function(){c.cancel()})),e.next=5,Jc.a.get("./data/relations.json",{cancelToken:c.token});case 5:return i=e.sent,e.abrupt("return",i.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ui=Object(f.c)({name:"relations",initialState:{relations:null,loading:"idle",url:"./data/relations.json"},reducers:{setUrl:function(e,t){var n=t.payload;e.url=n}},extraReducers:function(e){e.addCase(oi.pending,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"pending"})})),e.addCase(oi.fulfilled,(function(e,t){return Object(u.a)(Object(u.a)({},e),{},{loading:"idle",relations:t.payload})})),e.addCase(oi.rejected,(function(e){return Object(u.a)(Object(u.a)({},e),{},{loading:"failed"})}))}}).reducer,si=s.a.div.withConfig({displayName:"GlobalView__StyledGlobalView",componentId:"sc-i71yzl-0"})(["display:grid;position:relative;width:100%;height:100%;grid-template-areas:'rel  map' 'timeline timeline';grid-template-columns:1fr 1fr auto;grid-template-rows:1fr 250px;"]),li=s.a.div.withConfig({displayName:"GlobalView__GraphArea",componentId:"sc-i71yzl-1"})(["grid-area:rel;"]),di=s.a.div.withConfig({displayName:"GlobalView__MapArea",componentId:"sc-i71yzl-2"})(["grid-area:map;border-left:1px solid ",";"],At),bi=s.a.div.withConfig({displayName:"GlobalView__TimelineArea",componentId:"sc-i71yzl-3"})(["grid-area:timeline;border-top:1px solid ",";"],At),fi=function(){var e=Object(l.b)();return St((function(){e(ii()),e(Qc()),e(ti()),e(ri()),e(oi())})),Object(r.jsxs)(si,{children:[Object(r.jsx)(li,{children:Object(r.jsx)(Lr,{})}),Object(r.jsx)(di,{children:Object(r.jsx)(_c,{})}),Object(r.jsx)(bi,{children:Object(r.jsx)(qc,{})})]})},ji=s.a.div.withConfig({displayName:"Side1Main3",componentId:"sc-tols81-0"})(["display:grid;width:100%;height:100vh;grid-template-columns:25% 75%;"]),Oi=s.a.div.withConfig({displayName:"GridAutoRest",componentId:"sc-1bq6hj7-0"})(["display:grid;grid-template-rows:auto 1fr;overflow-y:hidden;"]),pi=s.a.div.withConfig({displayName:"Flip__Base",componentId:"sc-8vur65-0"})(["overflow:hidden;position:relative;"]),hi=s.a.div.withConfig({displayName:"Flip__W200",componentId:"sc-8vur65-1"})(["transition:transform ",";width:200%;height:100%;"],Tt.animation),vi=s.a.div.withConfig({displayName:"Flip__Grid",componentId:"sc-8vur65-2"})(["height:100%;display:grid;grid-template-columns:repeat(2,50%);"]),gi=s.a.div.withConfig({displayName:"Flip__DrawerIcon",componentId:"sc-8vur65-3"})(["z-index:999;border:1px lightgray solid;background-color:white;line-height:0;padding:10px 0;border-radius:10px;box-shadow:1px 1px 3px lightgray;position:absolute;display:flex;top:50%;left:calc(50% - 25px);"]),mi=function(e){var t=Object.assign({},e);return Object(r.jsxs)(gi,Object(u.a)(Object(u.a)({},t),{},{children:[Object(r.jsx)(qn,{as:"span",spaceLeft:!0,spaceRight:!0,title:"R\xe9duire la vue g\xe9n\xe9rale",children:Object(r.jsx)(y.d,{verticalAlign:"middle",size:"small"})}),Object(r.jsx)(qn,{as:"span",spaceLeft:!0,spaceRight:!0,title:"Afficher la vue g\xe9n\xe9rale",children:Object(r.jsx)(y.e,{verticalAlign:"middle",size:"small"})})]}))},xi=function(e){var t=e.children;if(2!==i.a.Children.count(t))throw new Error("Should have two childrens !");var n=Object(c.useState)(!0),a=Object(x.a)(n,2),o=a[0],s=a[1],l=ht((function(){s((function(e){return!e}))}));return Object(r.jsx)(pi,{children:Object(r.jsxs)(hi,{style:{transform:"translate3d(".concat(o?0:"-50%",", 0, 0)")},children:[Object(r.jsx)(vi,{children:t}),Object(r.jsx)(mi,Object(u.a)({},l))]})})},yi=n(413),wi=n(415),ki=n(411),Ci=(n(356),Object(f.c)({name:"filters",initialState:{},reducers:{setIntervalMask:function(e,t){var n=t.payload;e.interval=n},toggleActorMask:function(e,t){var n=t.payload;e.actor?e.actor[n]=void 0!==e.actor[n]&&!e.actor[n]:e.actor=Object(w.a)({},n,!1)},setActorMask:function(e,t){var n=t.payload;e.actor=n},setBoundsMask:function(e,t){var n=t.payload;e.bounds=n},clearMask:function(){return{}}}})),Mi=Ci.actions,Ei=Mi.setIntervalMask,_i=(Mi.setActorMask,Mi.toggleActorMask),Si=Mi.setBoundsMask,Ni=(Mi.clearMask,Ci.reducer),Ii=(n(194),function(e){return e.selection}),Ai=Object(L.a)(Ii,(function(e){return Object(j.keyBy)("id",e)})),Li=function(e){return e.superHighlight},Bi=Object(L.a)(Li,Object(j.keyBy)("id")),Ri=Object(L.a)(Ii,Li,(function(e,t){return t||e})),zi=Object(L.a)(Ri,Object(j.keyBy)("id")),Ti=Object(f.c)({name:"super-highlight",initialState:null,reducers:{setSuperHighlights:function(e,t){return Object(j.isArray)(t.payload)?t.payload:[t.payload]},clearSuperHighlights:function(){return null}}}),Pi=Ti.actions,Di=Pi.setSuperHighlights,Fi=Pi.clearSuperHighlights,Gi=Ti.reducer;function $i(e){var t=Object(l.b)();return{onMouseEnter:function(){return t(Di(e))},onMouseLeave:function(){return t(Fi())}}}var Ui=i.a.createContext({}),Hi=function(e){var t=e.a,n=e.arc,i=e.donut,a=e.radius,o=Object(c.useContext)(Ui),s=Object(l.c)(rn),d=Object(x.a)(t.data,2),b=d[0],f=d[1],j=Object(c.useMemo)((function(){return n(t)}),[n,t]),O=Object(c.useMemo)((function(){return s(b)}),[s,b]),p=Object(c.useMemo)((function(){return Object(ue.map)(f,(function(e){return{id:e.id,kind:"Event"}}))}),[f]),h=$i(p),v=h.onMouseEnter,g=h.onMouseLeave,m=Object(c.useCallback)((function(){o.current.cancel&&o.current.cancel(),v()}),[v,o]),y=Object(c.useCallback)((function(){o.current.id=null,g()}),[g,o]);return Object(r.jsxs)("g",Object(u.a)(Object(u.a)({fill:O},vt(p)),{},{onMouseEnter:m,onMouseLeave:y,children:[Object(r.jsx)("path",{opacity:.3,d:j,children:Object(r.jsx)("title",{children:f.length})}),Object(r.jsx)(qi,{a:t,d:j,donut:i,radius:a,children:Object(r.jsx)("title",{children:f.length})})]}))},Wi=Object(V.z)(),Vi=Object(V.a)(),qi=function(e){var t=e.a,n=e.d,i=e.donut,a=e.radius,o=e.children,u=Object(l.c)(zi),s=t.startAngle,d=t.endAngle,b=Object(x.a)(t.data,2)[1],f=Object(c.useMemo)((function(){return Object(ue.isEmpty)(u)?n:Vi({startAngle:s,endAngle:d,innerRadius:i,outerRadius:i+a*Wi(Object(ue.sumBy)(b,(function(e){var t=e.id;return u[t]?1:0}))/b.length)})}),[s,d,b,n,i,a,u]);return Object(r.jsx)("path",{d:f,children:o})},Ki=function(e){var t=e.radius,n=e.counts,i=e.donut,a=void 0===i?0:i,o=Object(c.useMemo)((function(){return V.t().sort(null).value((function(e){return e[1].length}))(n)}),[n]),u=Object(c.useMemo)((function(){return V.a().innerRadius(a).outerRadius(a+t)}),[t,a]);return Object(r.jsx)("g",{stroke:"white",pointerEvents:"initial",children:Object(ue.map)(o,(function(e){return Object(r.jsx)(Hi,{a:e,arc:u,donut:a||0,radius:t},e.data[0])}))})};function Zi(e,t){e._svg||(e._svg=V.h("div").node()),t.push(e);var n=e._childClusters;return 0!==n.length&&(1===n.length&&n[0]._svg,n.forEach((function(e){return Zi(e,t)}))),t}var Xi=V.z().range([0,5]);function Yi(e){var t=e.getAllChildMarkers(),n=2*Xi(t.length)+10;return e._svg||(e._svg=V.h("div").node()),W.a.divIcon({html:e._svg,className:"",iconSize:W.a.point(n,n)})}var Ji=function(e){var t=e.$l,n=e.markers,i=e.options,a=Object(c.useRef)(void 0);void 0===a.current&&(a.current=W.a.markerClusterGroup(Object(u.a)(Object(u.a)({},i),{},{iconCreateFunction:Yi}))),Object(c.useEffect)((function(){var e=t.current;return e.addLayer(a.current),function(){e.removeLayer(a.current)}}),[]);var s=Object(l.c)(un),d=Object(c.useState)([]),b=Object(x.a)(d,2),f=b[0],j=b[1];return Object(c.useEffect)((function(){var e=Zi(a.current._topClusterLevel,[]);j(e.map((function(e){var t=e.getAllChildMarkers(),n=Xi(t.length),c=2*n,i=Object(V.E)(Object(V.m)(t.map((function(e){return e.options})),s),(function(e){return Object(x.a)(e,1)[0]}));return o.a.createPortal(Object(r.jsx)("svg",{width:c+10,height:c+10,viewBox:"".concat(-n-5," ").concat(-n-5," ").concat(c+10," ").concat(c+10),children:Object(r.jsx)(Ki,{radius:n,counts:i,donut:5})}),e._svg)})))}),[n,s]),Object(r.jsxs)(r.Fragment,{children:[n(a),f]})},Qi=W.a.CircleMarker.extend({options:{id:null,kind:null,actor:null}}),ea=function(e){var t=e.latlng,n=e.options,r=e.$l,i=e.$map,a=e.onMouseOut,o=e.onMouseOver,u=e.onClick,s=d((function(){return new Qi(t,n)}));return Object(c.useEffect)((function(){return r.current.addLayer(s.current),i.current.fire("sip-marker",{current:s.current},!0),function(){r.current.removeLayer(s.current),i.current.fire("sip-marker-off",{current:s.current},!0)}}),[]),function(e,t,n){Object(c.useEffect)((function(){e.current.setStyle({color:t,fillColor:n})}),[t,n])}(s,n.color,n.fillColor),function(e,t){Object(c.useEffect)((function(){e.current.setStyle({fillOpacity:t})}),[t])}(s,n.fillOpacity),function(e,t,n){Object(c.useEffect)((function(){if(void 0!==t)return e.current.on("mouseover",t),function(){e.current.off("mouseover")}}),[t]),Object(c.useEffect)((function(){if(void 0!==n)return e.current.on("mouseout",n),function(){e.current.off("mouseout")}}),[n])}(s,o,a),function(e,t){Object(c.useEffect)((function(){if(void 0!==t)return e.current.on("click",t),function(){e.current.off("click")}}),[t])}(s,u),null};var ta=function(e){var t=e.$l,n=e.$map,i=e.event,a=Object(l.b)(),o=i.place,s=i.event.id,d=Object(l.c)(sn),b=Object(l.c)(zi),f=Object(c.useMemo)((function(){return{id:s,kind:"Event"}}),[s]),O=$i(f),p=O.onMouseEnter,v=O.onMouseLeave;return Object(r.jsx)(ea,{$map:n,$l:t,onClick:Object(c.useCallback)((function(){return a(h(f))}),[f]),onMouseOver:p,onMouseOut:v,latlng:[+o.lat,+o.lng],options:Object(u.a)(Object(u.a)({id:s},i),{},{fillColor:d.main(i),color:d.border(i),fillOpacity:Object(j.isEmpty)(b)||void 0!==b[s]?1:.5,weight:1,radius:5})})},na=Object(L.a)(ze,(function(e){return Object(j.transform)((function(e,t){var n=t.place;n&&n.lat&&n.lng&&e.push(t)}),[],e)})),ra=function(e){var t=e.$map,n=e.$layer,i=Object(l.c)(na),a=Object(c.useCallback)((function(e){return i.map((function(n){return Object(r.jsx)(ta,{$map:t,$l:e,event:n},n.event.id)}))}),[i]);return Object(r.jsx)(Ji,{$l:n,markers:a,options:{animate:!1,maxClusterRadius:50,zoomToBoundsOnClick:!1,showCoverageOnHover:!1,removeOutsideVisibleBounds:!0,spiderfyOnMaxZoom:!1}})},ca=n(182),ia=n(213);function aa(e,t){if(e&&!(e.length<1))for(var n=1,r=e.length;n<r;n++)t(e[n-1],e[n])}function oa(e,t){if(e.x===t.x)return e.y===t.y?null:{x:e.x};var n=(t.y-e.y)/(t.x-e.x);return{a:n,b:e.y-n*e.x}}function ua(e,t,n,r){var c=oa(e,t),i=oa(n,r);if(null===c||null===i)return null;if(c.hasOwnProperty("x"))return i.hasOwnProperty("x")?null:{x:c.x,y:i.a*c.x+i.b};if(i.hasOwnProperty("x"))return{x:i.x,y:c.a*i.x+c.b};if(c.a===i.a)return null;var a=(i.b-c.b)/(c.a-i.a);return{x:a,y:c.a*a+c.b}}function sa(e,t,n){return{x:e.x+t*Math.cos(n),y:e.y+t*Math.sin(n)}}function la(e,t){return function(e,t){var n=[],r=e[0],c=e[e.length-1];r&&c&&(n.push(r.offset[0]),aa(e,(function(e,r){n=n.concat(function(e,t,n){return function(e,t,n){if(e.offsetAngle===t.offsetAngle)return[e.offset[1]];var r=da(e.offset,t.offset);if(r*n>0&&r*da(e.offset,[e.offset[0],t.offset[1]])>0)return[ua(e.offset[0],e.offset[1],t.offset[0],t.offset[1])];var c=[],i=e.original[1],a=n>0,o=a?t.offsetAngle:e.offsetAngle,u=a?e.offsetAngle:t.offsetAngle;u<o&&(u+=2*Math.PI);for(var s=Math.PI/8,l=o;l<u;l+=s)c.push(sa(i,n,l));return c.push(sa(i,n,u)),a?c.reverse():c}(e,t,n).filter((function(e){return e}))}(e,r,t))})),n.push(c.offset[1]));return n}(function(e,t){var n=[];return aa(e,(function(e,r){if(e.x!==r.x||e.y!==r.y){var c=Math.atan2(e.y-r.y,e.x-r.x)-Math.PI/2;n.push({offsetAngle:c,original:[e,r],offset:[sa(e,t,c),sa(r,t,c)]})}})),n}(e,t),t)}function da(e,t){var n=ba(e),r=ba(t);return Math.atan2(n.x*r.y-n.y*r.x,n.x*r.x+n.y*r.y)}function ba(e){return{x:e[1].x-e[0].x,y:e[1].y-e[0].y}}var fa=W.a.Polyline.extend({_projectLatlngs:function(e,t,n){var r,c,i=e[0]instanceof W.a.LatLng,a=e.length;if(i){for(c=[],r=0;r<a;r++)c[r]=this._map.latLngToLayerPoint(e[r]),n.extend(c[r]);this.options.offset&&(c=la(c,this.options.offset)),t.push(c.map((function(e){return W.a.point(e.x,e.y)})))}else for(r=0;r<a;r++)this._projectLatlngs(e[r],t,n)},setOffset:function(e){return this.options.offset=e,this.redraw(),this}}),ja=function(e){var t=e.$l,n=e.events,r=e.offset,i=e.twoWay,a=e.color,o=e.weight,u=void 0===o?5:o,s=e.dashArray,d=void 0===s?[2,12]:s,b=e.delay,f=void 0===b?400:b,O=Object(c.useRef)();Object(c.useEffect)((function(){var e=Object(ia.antPath)([],{pulseColor:"#FFFFFF",lineCap:"butt",dashArray:d,delay:f,use:function(e,t){return new fa(e,t)}});return O.current=e,t.current.addLayer(e),function(){t.current.removeLayer(e)}}),[]);var p=Object(l.c)(zi);return Object(c.useEffect)((function(){O.current.setLatLngs(n.map((function(e){return e.latLng})))}),[n]),Object(c.useEffect)((function(){O.current.setStyle({color:a})}),[a]),Object(c.useEffect)((function(){O.current.setStyle({weight:u-1})}),[u]),Object(c.useEffect)((function(){O.current.setStyle({dashArray:d})}),[d]),Object(c.useEffect)((function(){O.current.setStyle({delay:f})}),[f]),Object(c.useEffect)((function(){O.current.setStyle({opacity:Object(j.isEmpty)(p)||n.some((function(e){var t=e.options.id;return void 0!==p[t]}))?void 0:.3})}),[p,n]),Object(c.useEffect)((function(){O.current.setStyle({offset:void 0!==r?r*u+(i?u/2:0):void 0}),O.current.redraw()}),[r,i,u]),null},Oa=ca.a().domain([1,10]).range([2,50]),pa=function(e){var t=e.id,n=e.$l,i=e.chain,a=e.offset,o=e.total,u=e.events,s=Object(c.useContext)(Ui),b=Object(l.b)(),f=d((function(){return W.a.featureGroup()}));Object(c.useEffect)((function(){return n.current.addLayer(f.current),function(){n.current.removeLayer(f.current)}}),[]);var O=Object(l.c)(on),p=Object(c.useMemo)((function(){return u.map((function(e){return{id:e.id,kind:"Event"}}))}),[u]),v=$i(p),g=Object(c.useCallback)((function(){return b(h(p))}),[b,p]);return Object(c.useEffect)((function(){var e=Object(j.debounce)(100,(function(){s.current.id===t&&(s.current.id=null,v.onMouseLeave())})),n={mouseover:function(){s.current.id!==t?(v.onMouseEnter(),s.current.id=t,s.current.cancel=e.cancel):s.current.id===t&&s.current.cancel()},mouseout:e,click:g};return f.current.on(n),function(){f.current.off(n)}}),[t,f,s,v,g]),Object(r.jsx)(r.Fragment,{children:i.map((function(e){var n=e.segment,c=e.diff,i=n.map((function(e){return e.options.id})).join(":"),u=n.map((function(e){return e.groupId})).join(":");return Object(r.jsx)(ja,{id:i,$l:f,events:n,offset:a[i],twoWay:o[u],dashArray:[2,Oa(c<1?1:c)],delay:500,color:O?O(t):Lt},i)}))})},ha=n(195);function va(){var e=[],t=[];function n(n){if(e.length>0){var r=e[e.length-1],c=wa(r);if(void 0===n||c<=n){var i=ya(r);e[e.length-1]=null;for(var a=e.length-2;a>=0&&!(void 0!==n&&n<c);a--)t.push({event:r,start:i,end:c}),i=c,r=e[a],c=wa(r),e[a]=null;(void 0===n||c<=n)&&t.push({event:r,start:i,end:c}),e=Object(j.compact)(e)}}}return{solve:n,add:function(r){var c=ya(r);if(c){n(c);var i,a=Object(j.last)(e);a&&t.push({event:a,start:ya(a),end:c}),i=wa(r),(e=e.filter((function(e){return i<wa(e)}))).push(r)}},results:function(){return t}}}function ga(e){var t=va(),n=t.solve,r=t.add,c=t.results;return Object(j.pipe)(Object(j.sortBy)(ya),Object(j.forEach)(r))(e),n(),c()}function ma(e){return Object(j.transform)((function(e,t){var n=t.event,r=t.start,c=t.end,i=Object(j.last)(e);void 0!==i&&i.id===n.groupId?(i.interval[1]=n,i.end=c):e.push({interval:[n,n],id:n.groupId,start:r,end:c})}),[],e)}function xa(e){return ha.a(e,(function(e,t){var n=Object(x.a)(e.interval,2)[1],r=e.end;return{segment:[n,Object(x.a)(t.interval,1)[0]],diff:+t.start.slice(0,4)-+r.slice(0,4)}}))}var ya=function(e){var t,n=e.options;return null===(t=Object(j.first)(n.event.datation))||void 0===t?void 0:t.value},wa=function(e){var t,n=e.options;return null===(t=Object(j.last)(n.event.datation))||void 0===t?void 0:t.value},ka=function(e,t){switch(t.type){case"set":return t.payload;case"add":return Object(u.a)(Object(u.a)({},e),{},Object(w.a)({},t.payload.options.id,t.payload));case"remove":return Object(j.pickBy)((function(e,n){return n!==t.payload.options.id.toString()}),e);default:throw new Error}},Ca=function(e){var t=e.$map,n=e.$l,i=e.defaultMarkerSet,a=d((function(){return W.a.layerGroup()}));Object(c.useEffect)((function(){return n.current.addLayer(a.current),function(){n.current.removeLayer(a.current)}}),[]);var o=Object(c.useReducer)(ka,{}),s=Object(x.a)(o,2),l=s[0],b=s[1],f=Object(c.useState)((function(){return t.current.getZoom()})),O=Object(x.a)(f,2),p=O[0],h=O[1];Object(c.useEffect)((function(){var e=t.current;b({type:"set",payload:Object(j.keyBy)("options.id",i.current)});var n=function(){return h(e.getZoom())},r=function(e){return b({type:"add",payload:e.current})},c=function(e){return b({type:"remove",payload:e.current})};return e.on({zoomend:n,"sip-marker":r,"sip-marker-off":c}),function(){e.off({zoomend:n,"sip-marker":r,"sip-marker-off":c})}}),[]);var v=Object(c.useMemo)((function(){var e=Object(j.flow)(Object(j.map)((function(e){return Object(u.a)({options:e.options},function(e,t){var n=e.__parent;if(!n||n._zoom<t)return{groupId:e._leaflet_id,latLng:e.getLatLng()};for(;void 0===n._zoom||n._zoom>t;)n=n.__parent;return{groupId:n._leaflet_id,latLng:n.getLatLng()}}(e,p))})),Object(j.groupBy)("options.actor.id"),Object(j.mapValues)((function(e){return{markers:e.map((function(e){return e.options})),chain:Object(j.flow)(ga,ma,xa)(e)}})))(l),t=Object(j.flow)(Object(j.flatMap)("chain"),Object(j.filter)("segment.1.options.event.datation.0.value"),Object(j.sortBy)("segment.1.options.event.datation.0.value"))(e);return{chens:e,offset:Object(j.fromPairs)(Object(V.m)(t,(function(e){return e.segment.map((function(e){return e.groupId})).join(":")})).flatMap((function(e){var t=Object(x.a)(e,2);t[0];return t[1].map((function(e,t){return[e.segment.map((function(e){return e.options.id})).join(":"),t]}))}))),total:Object(j.pipe)(Object(j.map)((function(e){return e.segment.map((function(e){return e.groupId}))})),Object(j.keyBy)((function(e){return e.join(":")})),(function(e){return Object(j.mapValues)((function(t){return void 0!==e[Object(j.reverse)(t).join(":")]}),e)}))(t)}}),[p,l]),g=v.chens,m=v.offset,y=v.total;return Object(r.jsx)(r.Fragment,{children:Object(ue.map)(g,(function(e,t){var n=e.chain,c=e.markers;return Object(r.jsx)(pa,{id:""+t,$l:a,chain:n,events:c,offset:m,total:y},t)}))})};var Ma=function(e){var t=e.className,n=Object(l.b)(),i=Object(c.useRef)([]),a=Object(c.useRef)(null),o=Object(c.useCallback)((function(e){e&&(a.current=e.leafletElement,a.current.fitWorld())}),[]),u=Object(c.useRef)(),s=Object(c.useCallback)((function(e){e&&(u.current=e)}),[]),d=Object(c.useRef)(),b=Object(c.useCallback)((function(e){e&&(d.current=e)}),[]);Object(c.useEffect)((function(){a.current.invalidateSize(),a.current.on("moveend",(function(){var e=a.current.getBounds(),t=e.getSouthWest(),r=e.getNorthEast();n(Si([{lat:t.lat,lng:t.lng},{lat:r.lat,lng:r.lng}]))})),a.current.on("sip-marker",(function(e){i.current.push(e.current)}))}),[n]);var f=Object(c.useRef)({id:null,cancel:null});return Object(r.jsx)("div",{className:t,children:Object(r.jsx)(Ui.Provider,{value:f,children:Object(r.jsx)(yi.a,{bounds:[[48.853333,2.348611],[46.5691,.348203]],ref:o,maxZoom:15,children:Object(r.jsxs)(wi.a,{position:"topright",children:[Object(r.jsx)(wi.a.BaseLayer,{name:"OpenStreetMap",children:Object(r.jsx)(ki.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})}),Object(r.jsx)(wi.a.BaseLayer,{name:"Esri.WorldTopoMap",children:Object(r.jsx)(ki.a,{attribution:"Tiles \xa9 Esri \u2014 Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"})}),Object(r.jsx)(wi.a.BaseLayer,{name:"CartoDB.Positron",children:Object(r.jsx)(ki.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",subdomains:"abcd",maxZoom:19})}),Object(r.jsx)(wi.a.BaseLayer,{checked:!0,name:"CartoDB.Voyager",children:Object(r.jsx)(ki.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19,url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"})}),Object(r.jsx)(wi.a.Overlay,{name:"Markers",checked:!0,ref:s,children:Object(r.jsx)(ra,{$layer:u,$map:a})}),Object(r.jsx)(wi.a.Overlay,{ref:b,name:"AntPaths",checked:!0,children:Object(r.jsx)(Ca,{$l:d,$map:a,defaultMarkerSet:i})})]})})})})},Ea=n(116);n(46),n(140),n(141);function _a(e){var t=Object(c.useRef)(null);return Object(c.useLayoutEffect)((function(){var n=Object(Ea.a)(t.current).datum(e);return function(){n.datum(null)}}),[]),t}var Sa=Object(f.c)({name:"relation/highlight",initialState:null,reducers:{setRelationHighlight:function(e,t){return t.payload},clearRelationHighligh:function(){return null}}}),Na=function(e){return e.relationHighlight},Ia=Object(L.a)($e,Na,Ke),Aa=Object(L.a)(Xe,Na,(function(e,t){return e||t})),La=Sa.actions,Ba=La.setRelationHighlight,Ra=La.clearRelationHighligh,za=Sa.reducer,Ta=function(e){var t=e.arc,n=e.a,i=e.parent,a=Object(l.b)(),o=Object(l.c)(Aa),s=Object(x.a)(n.data,2),d=s[0],b=s[1],f=$i(Object(c.useMemo)((function(){return Object(ue.flatMap)(Array.from(b.values(),(function(e){return e.events.map((function(e){return{id:e,kind:"Event"}}))})))}),[b])),j=Object(c.useCallback)((function(){a(Qe({actor:i,loc:d}))}),[i,d,a]),O=Object(c.useCallback)((function(){a(Ba({actor:i,loc:d})),f.onMouseEnter()}),[i,d,f,a]),p=Object(c.useCallback)((function(){a(Ra()),f.onMouseLeave()}),[f,a]),h=o&&(o.loc===d?o.actor===i?void 0:.6:.3)||void 0;return Object(r.jsx)("path",Object(u.a)(Object(u.a)({d:t(n)},ht(j)),{},{onMouseEnter:O,onMouseLeave:p,fillOpacity:h,children:Object(r.jsx)("title",{children:b.size})}))},Pa=V.z().range([0,3]),Da=function(e){var t=e.datum,n=_a(t),i=Object(l.c)(He).get(t.id),a=i.locsLinks,o=i.ghosts,u=Object(l.c)(on),s=Object(c.useMemo)((function(){return V.t().sort(null).value((function(e){return Object(x.a)(e,2)[1].size}))(Array.from(a))}),[a]),d=Object(c.useMemo)((function(){return V.a().innerRadius(0).outerRadius(Pa(o.size))}),[o.size]);return Object(r.jsxs)("g",{ref:n,fill:u?u(t.id):Lt,cursor:"pointer",children:[Object(r.jsx)("circle",{r:Pa(o.size),fill:"white"}),s.map((function(e){return Object(r.jsx)(Ta,{parent:t.id,a:e,arc:d},e.data[0])}))]})},Fa=n(117),Ga=n(201),$a=Object(Fa.a)().curve(Ga.a.beta(1)),Ua=Object(L.a)(Xe,Na,(function(e,t){return e?t&&e.actor===t.actor?null:t:null})),Ha=Object(L.a)(Ye,Ia,(function(e,t){return e.ghosts.size>0?e:t})),Wa=Object(L.a)(Ha,(function(e){return e.actorRingLinks})),Va=(Object(L.a)(Ha,(function(e){return e.ringLinks})),Object(L.a)(Ha,(function(e){return e.ghosts}))),qa=Object(L.a)(Va,(function(e){return Object(V.E)(e.values(),(function(e){return e.order}),(function(e){return e.weight}))})),Ka=Object(L.a)(qa,Wa,(function(e,t){return Object(j.pipe)(Array.from,Object(j.concat)(e),Object(j.groupBy)("target"),Object(j.mapValues)(Object(j.pipe)(Object(j.map)("source"),Object(j.keyBy)(ue.identity))))(t.values())})),Za=function(e){var t=e.$g,n=e.color,i=e.x,a=Object(l.c)(qa),o=Object(c.useMemo)((function(){var e=V.k(a,(function(e){return e.weight}));return V.w().domain(e).range([1,20])}),[a]),u=Object(l.c)(Ka);return Object(r.jsx)("g",{ref:t,fill:null!==n&&void 0!==n?n:Lt,children:a.map((function(e){return Object(r.jsx)(Xa,{datum:e,x:i,y:o,actors:u[e.target],color:n||Lt},e.target)}))})},Xa=function(e){var t,n,i=e.actors,a=e.datum,o=e.x,u=e.y,s=e.color,d=Object(l.c)(Ve),b=Object(l.b)(),f=Object(l.c)(Ua),j=Object(c.useState)({show:!1,x:0,y:0}),O=Object(x.a)(j,2),p=O[0],h=O[1],v=ht((function(e){b(ot(a.target))})),g=v.onClick,m=v.onMouseUp,y=Object(c.useCallback)((function(e){var t=e.target.parentNode.querySelector("circle").getBoundingClientRect(),n=t.top,r=t.height,c=t.left;h({show:!0,x:c,y:n+r/2})}),[]),w=Object(c.useCallback)((function(e){h({show:!1,x:0,y:0})}),[]);return Object(r.jsxs)("g",{style:{transform:"rotate(".concat(180*o(a.target)/Math.PI,"deg) translate3d(200px, 0, 0)")},opacity:f?i[f.actor]?1:.3:void 0,onMouseUp:m,onMouseEnter:y,onMouseLeave:w,children:[Object(r.jsx)("circle",{r:5}),Object(r.jsx)("rect",{x:6,y:-2.5,height:5,width:u(a.weight)}),p.show&&Object(r.jsx)("g",{onClick:g,children:Object(r.jsx)(nr,{children:Object(r.jsx)(Qa,{x:p.x,y:p.y,color:s,label:null===(t=d.get(a.target))||void 0===t?void 0:t.label})})}),Object(r.jsx)("title",{children:null===(n=d.get(a.target))||void 0===n?void 0:n.label})]})},Ya=s.a.div.withConfig({displayName:"SuggestionNode__AbsoluteDiv",componentId:"sc-vzxwil-0"})(["z-index:9999;border-radius:500px;position:absolute;color:white;background-color:white;cursor:pointer;"]),Ja=s.a.div.withConfig({displayName:"SuggestionNode__StyledDiv",componentId:"sc-vzxwil-1"})(["height:20px;border-radius:500px;padding-right:0.5em;padding-left:4px;padding-top:2px;line-height:1;display:flex;"]),Qa=function(e){var t,n=e.x,c=e.y,i=e.color,a=e.label;return Object(r.jsx)(Ya,{style:{left:n-5,top:c-10},children:Object(r.jsxs)(Ja,{style:{backgroundColor:null===(t=V.g(i))||void 0===t?void 0:t.darker().toString()},children:[Object(r.jsx)(y.m,{}),Object(r.jsx)("span",{style:{marginLeft:"2px"},children:a})]})})},eo=n(134),to=-14;function no(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:to;return{x:ro(e.length*Math.cos(e.theta),t),y:ro(e.length*Math.sin(e.theta),t)}}function ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,-t);return Math.round(e*n)/n}var co=Object(L.a)(Wa,qa,(function(e,t){var n=Math.floor(t.length/4),r=Object(ue.map)(t,"target");return Object(j.pipe)(Object(j.groupBy)("source"),Object(j.flatMap)((function(e){var t=Object(j.keyBy)("target",e),c=Object(j.pipe)(Object(j.map)((function(e){return t[e]})),Object(j.transform)((function(e,t){t?e[e.length-1].push(t):e[e.length-1].length>0&&e.push([])}),[[]]))(r);return 0===c[c.length-1].length&&c.pop(),Object(j.flatMap)((function(e){return e.length<=n+Math.ceil(n/4)?[e]:Object(j.chunk)(n,e)}),c)})))(Array.from(e.values()))})),io=function(e){var t=e.$g,n=e.x,c=Object(l.c)(co);return Object(r.jsx)("g",{ref:t,stroke:It,strokeWidth:1.5,fill:"none",children:Object(j.flatMap)((function(e){var t=e.map((function(e){return{theta:n(e.target),length:200}})),c=function(e){var t=no(e);return[t.x,t.y]};return e.map((function(n,i){return Object(r.jsx)(ao,{datum:n,cluster:e.length>1?c({theta:Object(j.meanBy)("theta",t),length:190}):void 0,suggestion:c(t[i])},n.id)}))}),c)})},ao=function(e){var t=e.datum,n=e.suggestion,i=e.cluster,a=Object(c.useMemo)((function(){return i?[i,n]:[n]}),[i,n]),o=Object(c.useMemo)((function(){return[t,a]}),[t,a]),u=_a(o);Object(c.useEffect)((function(){u.current&&Object(V.C)(u.current).datum(o)}),[u,o]);var s=Object(l.c)(on),d=Object(l.c)(Ua);return Object(r.jsx)("path",{ref:u,style:{mixBlendMode:"multiply"},stroke:s?s(t.source):void 0,opacity:d?d.actor===t.source?1:.3:1})},oo=function(e){var t=e.$g,n=e.x;return Object(r.jsx)("g",{ref:t,stroke:"#bbb",fill:"none",children:Array.from([],(function(e){var t=Object(x.a)(e,2),c=t[0],i=t[1];return Object(r.jsx)(uo,{datum:i,x:n},c)}))})},uo=function(e){var t=e.datum,n=e.x,c=_a(t),i=no({theta:n(t.target),length:200}),a=i.x,o=i.y,u=no({theta:n(t.source),length:200}),s=u.x,l=u.y;return Object(r.jsx)("path",{ref:c,d:$a([[a,o],[0,0],[s,l]]),style:{mixBlendMode:"multiply"}})},so=Object(L.a)(on,Aa,(function(e,t){return e?t?e(t.actor):void 0:null})),lo=Object(eo.a)().range([0,2*Math.PI]),bo=function(e){return lo(e)+(lo.bandwidth()-Math.PI)/2},fo=function(e){var t=e.$links,n=e.updateLinkPosition,i=Object(l.c)(so),a=Object(l.c)(qa);lo.domain(Object(j.map)("target",a));var o=Object(l.c)(Wa);return Object(c.useEffect)((function(){n.current&&n.current.ringLinks()}),[o,n]),Object(r.jsxs)("g",{children:[Object(r.jsx)(oo,{x:bo}),Object(r.jsx)(io,{$g:t,x:bo}),Object(r.jsx)(Za,{color:i,x:bo})]})},jo=n(144),Oo=n(410),po=n(407),ho=n(408),vo=n(409);var go,mo=(go=function(e){return e.id},jo.a().force("charge",Oo.a().strength(-300)).force("link",po.a().id(go).distance(100)).force("x",ho.a()).force("y",vo.a())),xo=function(e){var t,n,c=e.offset,i=Object(l.c)(Aa),a=null!==(t=Object(l.c)(te))&&void 0!==t?t:{};return Object(r.jsx)("text",{x:c&&-c.width/2,y:c&&32-c.height/2,fontSize:"1em",children:i&&(null===(n=a[i.loc])||void 0===n?void 0:n.label)})},yo=function(e){var t=_a(e.datum);return Object(r.jsx)("line",{ref:t})},wo=function(e){var t=e.className,n=Object(l.b)(),i=Object(c.useRef)(null),a=Object(c.useRef)(null),o=Object(c.useRef)(null),u=function(){var e=Object(c.useState)(),t=Object(x.a)(e,2),n=t[0],r=t[1];return{dims:n,$svg:Object(c.useCallback)((function(e){if(e){var t=Object(j.debounce)(100,(function(){r(e.getBoundingClientRect())}));return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}}}),[])}}(),s=u.dims,d=u.$svg,b=Object(l.c)(Ue),f=Object(l.c)(We),O=Object(c.useRef)(null);Object(c.useEffect)((function(){mo.on("tick",(function(){c.style("transform",(function(e){return"translate3d(".concat(e.x,"px, ").concat(e.y,"px, 0)")})),r.attr("x1",(function(e){return e.source.x})).attr("y1",(function(e){return e.source.y})).attr("x2",(function(e){return e.target.x})).attr("y2",(function(e){return e.target.y})),u.attr("d",(function(e){if(void 0===e)return"";var t=Object(x.a)(e,2),n=t[0],r=t[1];if(s.has(n.source)){var c=s.get(n.source),i=c.x,a=void 0===i?0:i,o=c.y;return $a([[a,void 0===o?0:o]].concat(Object(qt.a)(r)))}return""}))}));var e=a.current.childNodes,t=i.current.childNodes,n=o.current.childNodes,r=V.D(e),c=V.D(t),u=V.D(n),s=new Map;return O.current={nodes:function(){c=V.D(t),s=Object(j.transform)((function(e,t){return e.set(t.id,t)}),new Map,c.data()),mo.nodes(c.data()),mo.alpha(1).restart()},links:function(){r=V.D(e),mo.force("link").links(r.data()),mo.alpha(1).restart()},ringLinks:function(){(u=V.D(n)).attr("d",(function(e){var t=Object(x.a)(e,2),n=t[0],r=t[1];if(s.has(n.source)){var c=s.get(n.source),i=c.x,a=void 0===i?0:i,o=c.y;return $a([[a,void 0===o?0:o]].concat(Object(qt.a)(r)))}return""}))}},function(){mo.stop()}}),[]),Object(c.useEffect)((function(){O.current.nodes()}),[b]),Object(c.useEffect)((function(){O.current.links()}),[f]);var p=Object(c.useCallback)((function(){return n(et())}),[n]);return Object(r.jsxs)("svg",{className:t,ref:d,width:"100%",height:"100%",viewBox:s&&"".concat(-s.width/2,",").concat(-s.height/2,",").concat(s.width,",").concat(s.height),onMouseUp:p,children:[Object(r.jsx)(xo,{offset:s}),Object(r.jsx)(fo,{$links:o,updateLinkPosition:O}),Object(r.jsx)("g",{ref:a,stroke:Lt,strokeWidth:1.5,children:Object(c.useMemo)((function(){return Array.from(f,(function(e){var t=Object(x.a)(e,2),n=t[0],c=t[1];return Object(r.jsx)(yo,{datum:c},n)}))}),[f])}),Object(r.jsx)("g",{ref:i,stroke:"#fff",strokeWidth:1.5,children:Object(c.useMemo)((function(){return Array.from(b,(function(e){var t=Object(x.a)(e,2),n=t[0],c=t[1];return Object(r.jsx)(Da,{datum:c},n)}))}),[b])})]})},ko=(n(397),n(214)),Co=n(137),Mo=n.n(Co),Eo=(n(398),n(216));var _o={max:"2000-01-01",min:"1700-01-01",multiselect:!1,selectable:!1,stack:!0,showTooltips:!1,width:"100%",height:"300px",margin:{item:{horizontal:3,vertical:1}},orientation:{item:"top"},dataAttributes:["id","start","end","group","title","label","popover"],verticalScroll:!0,horizontalScroll:!0};var So={kind:"Place",id:"-1",label:"Inconnue",uri:"unknown",lat:null,lng:null},No=Object(L.a)(oe,Ai,Te,Bi,(function(e,t,n,r){return Object(j.flow)(Object(j.map)((function(e){return Object(u.a)(Object(u.a)({},e),{},{highlighted:void 0!==r[e.event.id],selected:void 0!==t[e.event.id],masked:void 0===n[e.event.id]})})),Object(j.sortBy)("event.datation[0].value"))(e)})),Io=Object(L.a)(No,(function(e){var t=Object(j.flow)(Object(j.groupBy)("actor.id"),Object(j.map)((function(e){return{kind:"ActorNote",group:Object(j.get)("0.actor",e),events:e,highlighted:e.some((function(e){return e.highlighted})),selected:e.some((function(e){return e.selected})),masked:!e.some((function(e){return!e.masked}))}})))(e),n=Object(j.flow)(Object(j.groupBy)("place.id"),Object(j.map)((function(e){var t;return{kind:"PlaceNote",group:null!==(t=Object(j.get)("0.place",e))&&void 0!==t?t:So,events:e,highlighted:e.some((function(e){return e.highlighted})),selected:e.some((function(e){return e.selected})),masked:!e.some((function(e){return!e.masked}))}})))(e);return Object(j.flow)(Object(j.orderBy)(["selected","kind"," events.0.event.datation.0.value"],["desc"]),Object(j.sortBy)((function(e){return"-1"===e.group.id?1:0})),Object(j.groupBy)((function(e){return!0===e.masked?"yes":"no"})))(Object(j.concat)(t,n))})),Ao=Object(f.c)({name:"timelineGroup",initialState:"Actor",reducers:{setGroup:function(e,t){return t.payload}}}),Lo=Ao.actions.setGroup,Bo=Ao.reducer,Ro=function(e){return e.timelineGroup},zo=Object(L.a)(Ro,ze,(function(e,t){switch(e){case"ActorNote":return Object(j.pipe)(Object(j.uniqBy)("actor.id"),Object(j.map)("actor"),Object(j.map)((function(e){var t=Object.assign({},e);return Object(u.a)(Object(u.a)({},t),{},{label:I(t,!0)})})))(t);case"PlaceNote":return Object(j.pipe)(Object(j.uniqBy)((function(e){var t,n;return null!==(t=null===(n=e.localisation)||void 0===n?void 0:n.id)&&void 0!==t?t:"-1"})),Object(j.map)((function(e){var t;return null!==(t=e.localisation)&&void 0!==t?t:So})))(t)}}));function To(e){return e.actor}function Po(e){var t=e.localisation;return t||So.id}var Do=Object(L.a)(Ro,(function(e){switch(e){case"ActorNote":return To;case"PlaceNote":return Po}})),Fo={margin:{top:10,right:20,bottom:20,left:20,view:{left:20,right:18,top:15,bottom:15},mask:{left:20,right:18,top:0,bottom:0}},width:"100%",height:70},Go=n(204),$o=function(e){var t=e.width,n=e.x,i=e.onBrush,a=e.sync,o=Object(c.useRef)(null),u=Object(c.useCallback)((function(e){if(e){var t=V.f(),n=V.C(e).call(t);o.current={dom:e,selection:n,brush:t}}}),[]);return Object(c.useEffect)((function(){var e=o.current,n=e.brush,r=e.selection;n.extent([[Fo.margin.view.left,Fo.margin.view.top],[t-Fo.margin.view.right,Fo.height-Fo.margin.view.bottom]]),r.call(n)}),[t]),Object(c.useEffect)((function(){if(a){var e=o.current,t=e.brush;e.selection.call(t.move,a.map(n))}}),[a,n]),Object(c.useEffect)((function(){o.current.brush.on("brush",(function(e){if(e.sourceEvent&&e.selection){var t=e.selection.map(n.invert),r=Object(x.a)(t,2),c=r[0],a=r[1];i(c,a)}}))}),[i,n]),Object(c.useEffect)((function(){o.current.selection.call((function(e){e.select(".overlay").datum({type:"selection"}).on("mousedown touchstart",(function(e){var t=o.current,r=t.brush,c=t.dom,i=t.selection,a=V.e(c);if(a){var u=Object(x.a)(a,2),s=u[0],l=u[1]-s,d=Object(Go.a)(e),b=Object(x.a)(d,1)[0],f=b-l/2,j=b+l/2,O=n.range(),p=Object(x.a)(O,2),h=p[0],v=p[1];i.call(r.move,j>v?[v-l,v]:f<h?[h,h+l]:[f,j])}}))}))}),[n]),Object(r.jsx)("g",{id:"context-window",className:"brush",ref:u})},Uo=function(e){var t=e.x,n=Object(l.c)(Wo),i=Object(l.c)(rn),a=Object(c.useMemo)((function(){return V.y().domain([V.s(n,(function(e){return V.s(e,(function(e){return e[0]}))})),V.r(n,(function(e){return V.r(e,(function(e){return e[1]}))}))]).range([Fo.height-Fo.margin.bottom,Fo.margin.top])}),[n]);return Object(r.jsx)(Gc,{x:t,y:a,stack:n,color:i,curve:V.j})},Ho={max:Object(G.a)("2000-01-01"),min:Object(G.a)("1700-01-01")},Wo=Object(L.a)(oe,un,tn,ie,we,(function(e,t,n,r,c){var i=Bc(e,t),a=Rc(i);return V.F().keys(n?r:c).order(V.H).value((function(e,t){return e.value[t]||0}))(a)})),Vo=function(e){var t=e.mask,n=e.onMaskUpdate,i=e.view,a=e.onViewUpdate,o=e.width,u=Object(c.useMemo)((function(){return V.A().domain([Ho.min,Ho.max]).range([Fo.margin.left,o-Fo.margin.right]).nice().clamp(!0)}),[o]);return Object(r.jsxs)("svg",{id:"timeline-context",width:"100%",height:Fo.height+"px",children:[Object(r.jsx)(Tc,{scale:u,position:["0",Fo.height-Fo.margin.bottom+"px"],axis:V.c}),Object(r.jsx)(Uo,{x:u}),Object(r.jsx)(Fc,{x:u,sync:t,onBrush:n,width:o,height:Fo.height,margin:Fo.margin.mask}),Object(r.jsx)($o,{onBrush:a,width:o,sync:i,x:u})]})},qo=s.a.input.withConfig({displayName:"StyledInput",componentId:"sc-16pium4-0"})(["opacity:0;width:0;height:0;display:none;visibility:hidden;"]),Ko=s.a.label.withConfig({displayName:"CheckBoxSwitch__StyledLabel",componentId:"sc-ym3as8-0"})(["line-height:1.2;margin-bottom:0;margin-right:1em;display:flex;align-items:center;"]),Zo=s.a.div.withConfig({displayName:"CheckBoxSwitch__StyledSlider",componentId:"sc-ym3as8-1"})(["cursor:pointer;padding:0.125em;height:1em;width:2em;transition:0.4s;border-radius:0.5em;background-color:",";"],It),Xo=s.a.div.withConfig({displayName:"CheckBoxSwitch__StyledKnob",componentId:"sc-ym3as8-2"})(["height:0.75em;width:0.75em;background-color:white;transition:0.4s;border-radius:0.5em;",";"],(function(e){return e.slide?"transform: translate3d(1em, 0, 0)":""})),Yo=s.a.div.withConfig({displayName:"CheckBoxSwitch__StyledText",componentId:"sc-ym3as8-3"})(["margin-left:0.125em;color:",";transition:0.4s;"],(function(e){return e.sliderColor})),Jo=function(e){var t=e.checked,n=e.handleCheck,c=e.children,i=e.color;return Object(r.jsxs)(Ko,{className:"pointer",onMouseUp:pt,children:[Object(r.jsx)(qo,{type:"checkbox",checked:t,onChange:n}),Object(r.jsx)(Zo,{style:{backgroundColor:t?i:void 0},children:Object(r.jsx)(Xo,{slide:t})}),Object(r.jsx)(Yo,{sliderColor:t?"":It,children:c})]})},Qo=Object(s.a)(Yo).withConfig({displayName:"ActorPlaceSwitch__PaddedStyledText",componentId:"sc-sgk7kv-0"})(["padding-left:0.125em;padding-right:0.125em;font-size:0.75em;font-weight:700;"]),eu=Object(s.a)(Zo).withConfig({displayName:"ActorPlaceSwitch__AdaptedSlider",componentId:"sc-sgk7kv-1"})(["background-color:",";"],Lt),tu=function(e){var t=e.className,n=Object(l.b)(),i=Object(c.useState)(!1),a=Object(x.a)(i,2),o=a[0],u=a[1],s=Object(c.useCallback)((function(){u((function(e){return!e}))}),[]);return Object(c.useEffect)((function(){n(Lo(o?"PlaceNote":"ActorNote"))}),[n,o]),Object(r.jsxs)(Ko,{className:M()("pointer",t),onMouseUp:pt,children:[Object(r.jsx)(qo,{type:"checkbox",checked:o,onChange:s}),Object(r.jsx)(Qo,{sliderColor:o?At:"",children:"Personnes"}),Object(r.jsx)(eu,{children:Object(r.jsx)(Xo,{slide:o})}),Object(r.jsx)(Qo,{sliderColor:o?"":At,children:"Lieux"})]})};function nu(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.computed){var r=e.computed,c=r.actorNote,i=r.actorNoteAndGrouped,a=r.placeNote,o=r.placeNoteAndGrouped;if("ActorNote"===t)return n&&i||c||e.label;if("PlaceNote"===t)return n&&o||a||e.label}return e.label}function ru(e){switch(e){case"Birth":return"Naissances";case"Death":return"D\xe9c\xe8s";case"Education":return"Enseignements";case"ObtainQualification":return"Obtention de qualit\xe9s";case"PassageExamen":return"Evaluations";case"Retirement":return"D\xe9parts en retraite";case"SuspensionActivity":return"Suspensions d'activit\xe9s";default:return e}}function cu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(e.length<t)return e.padEnd(t,"\xa0");var n=Object(j.split)(" ",e),r=Math.floor((n.length+1)/2);return Object(j.pipe)(Object(j.chunk)(r),Object(j.map)((function(e){return Object(j.join)(" ",e).padEnd(t,"\xa0")})),Object(j.join)("<br/>"))(n)}var iu="o-50",au=Object(L.a)(ze,Do,sn,(function(e,t,n){return Object(j.transform)((function(e,r){var c=r.event;if(c.datation&&c.datation.length>0){var i=c.id,a=c.kind,o=c.datation;e.push(Object(u.a)(Object(u.a)({id:i,title:Object(ko.unescape)(nu(c,"ActorNote")),popover:"true"},function(e){var t=Object(x.a)(e,2),n=t[0],r=t[1];return{start:n.value,end:r?r.value:null,type:r?"range":"box"}}(o)),{},{className:M()(Object(j.kebabCase)(a),"timeline-event"),style:"border:0 solid white;\n            border-left: 1px solid white;\n            border-right: 1px solid white;\n            background-color: ".concat(n.main(r),";"),group:t(c),kind:a}))}}),[],e)})),ou=Object(s.a)(tu).withConfig({displayName:"ProsoVisTimeline__VisHeader",componentId:"sc-18ipjfk-0"})(["position:absolute;bottom:20px;z-index:2;line-height:1.2;background-color:white;"]),uu=function(e){var t=e.className,n=Object(l.b)(),i=Object(l.c)(zo),a=Object(c.useState)(),o=Object(x.a)(a,2),u=o[0],s=o[1],d=Object(l.c)(au),f=function(){var e,t=Object(c.useState)(),n=Object(x.a)(t,2),r=n[0],i=n[1],a=Object(c.useRef)();return{$events:a,timeline:r,timelineRef:Object(c.useCallback)((e=function(e){Mo()(e).popover({selector:'[data-popover="true"]',trigger:"hover",placement:"top",content:function(){return this.getAttribute("data-label")||""}}),a.current=e.getElementsByClassName("timeline-event");var t=new Eo.a(e,[],[],_o);t.addCustomTime(void 0,"a"),t.addCustomTime(void 0,"b"),i({vis:t,dom:e})},function(t){if(t)return e(t)}),[])}}(),O=f.$events,p=f.timeline,m=f.timelineRef,y=function(){var e=Object(l.b)();return Object(c.useMemo)((function(){return Object(ue.throttle)((function(t,n){e(Ei({start:t.toISOString(),end:n.toISOString()}))}),100)}),[e])}(),w=Object(c.useState)(),k=Object(x.a)(w,2),C=k[0],M=k[1],E=Object(c.useMemo)((function(){return p?Object(j.throttle)(16,(function(e,t){p.vis.setCustomTime(e,"a"),p.vis.setCustomTime(t,"b"),y(e,t)})):j.noop}),[p,y]),_=Object(c.useState)(),S=Object(x.a)(_,2),N=S[0],I=S[1],A=Object(c.useMemo)((function(){return p?Object(j.throttle)(16,(function(e,t){p.vis.setWindow(e,t,{animation:!1})})):j.noop}),[p]);Object(c.useEffect)((function(){if(p){var e=Object(j.throttle)(16,(function(e,t){I([e,t])})),t=Object(j.throttle)(16,(function(e){var t=Object(j.sortBy)(j.identity,[e.time,"a"===e.id?p.vis.getCustomTime("b"):p.vis.getCustomTime("a")]);M(t);var n=Object(x.a)(t,2),r=n[0],c=n[1];y(r,c)}));p.vis.on("rangechange",(function(t){t.byUser&&e(t.start,t.end)})),p.vis.on("timechange",(function(e){t(e)}))}}),[p,y]);var L=Object(c.useRef)(void 0);void 0===L.current&&(L.current={click:function(e){},changed:function(e){},mouseOver:function(e){},mouseOut:function(e){}});var B=b();Object(c.useEffect)((function(){if(p)return p.vis.on("changed",(function(e){return L.current.changed(e)})),p.vis.on("mouseDown",(function(e){B.current.click||(B.current.click=!0,B.current.x=e.pageX,B.current.y=e.pageY)})),p.vis.on("mouseMove",(function(e){B.current.click&&B.current.draggingTreshold(B.current,e.event)&&(B.current.dragging=!0,B.current.click=!1)})),p.vis.on("mouseUp",(function(e){B.current.click&&L.current.click(e),B.current.dragging=!1,B.current.click=!1})),p.vis.on("mouseOver",(function(e){return L.current.mouseOver(e)})),function(){return p.vis.destroy()}}),[p]);var R=Object(l.c)(zi);Object(c.useEffect)((function(){var e=function(){if(p){var e=p.dom.getBoundingClientRect();u!==e.width&&s(e.width)}O.current&&Object(j.forEach)((function(e){var t=e.classList.contains(iu);if(Object(j.isEmpty)(R))t&&e.classList.remove(iu);else{var n=void 0!==R[e.dataset.id];t&&n?e.classList.remove(iu):t||n||e.classList.add(iu)}}),O.current)};e(),L.current.changed=e}),[O,R,p,u]),Object(c.useEffect)((function(){L.current.click=function(e){switch(e.what){case"group-label":var t=Object(j.pipe)(Object(j.filter)({group:e.group}),Object(j.map)((function(e){return{id:e.id,kind:"Event"}})),Object(j.sortBy)("id"))(d);e.event.ctrlKey||e.event.metaKey?n(v(t)):n(h(t));break;case"item":if(e.event.ctrlKey||e.event.metaKey)if(R[e.item]){var r=Object(j.filter)((function(t){return t.id!==e.item}),R);r&&n(h(r))}else n(v({id:e.item,kind:"Event"}));else n(h({id:e.item,kind:"Event"}));break;default:e.event.ctrlKey||e.event.metaKey||n(g())}}}),[n,R,d]);var z=Object(l.c)(Li),T=Object(l.c)(Ro);Object(c.useEffect)((function(){L.current.mouseOver=function(e){"group-label"===e.what?Object(j.pipe)(Object(j.filter)({group:e.group}),Object(j.map)((function(e){return{id:e.id,kind:"Event"}})),Object(j.sortBy)("id"),Di,n)(d):"item"===e.what?n(Di({id:e.item,kind:"Event"})):z&&n(Fi())},L.current.mouseOut=function(){z&&n(Fi())}}),[z,n,T,d]);var P=Object(c.useState)(!1),D=Object(x.a)(P,2),F=D[0],G=D[1];return Object(c.useEffect)((function(){p&&(p.vis.setItems(d),!1===F&&G(!0))}),[F,p,d]),Object(c.useEffect)((function(){if(!0===F&&p&&u&&0!==d.length){p.vis.fit({animation:!1});var e=p.vis.getWindow();I([e.start,e.end]),G(u)}}),[F,p,u,d]),Object(c.useEffect)((function(){p&&p.vis.setGroups(Object(j.map)((function(e){return{id:e.id,content:cu(e.label)}}),i))}),[i,p]),Object(r.jsxs)("div",{className:t,children:[Object(r.jsx)("div",{id:"timeline",ref:m,children:Object(r.jsx)(ou,{})}),u&&Object(r.jsx)(Vo,{mask:C,onMaskUpdate:E,view:N,onViewUpdate:A,width:u})]})},su=s.a.div.withConfig({displayName:"DetailView__Main",componentId:"sc-1iossoz-0"})(["display:grid;position:relative;width:100%;height:100%;grid-template-areas:'rel  map' 'timeline timeline';grid-template-columns:1fr 1fr;grid-template-rows:1fr auto;"]),lu=Object(s.a)(Ma).withConfig({displayName:"DetailView__StyledMap",componentId:"sc-1iossoz-1"})(["grid-area:map;border-left:1px solid ",";"],At),du=Object(s.a)(wo).withConfig({displayName:"DetailView__StyledRelation",componentId:"sc-1iossoz-2"})(["grid-area:rel;border-top:1px solid ",";"],At),bu=Object(s.a)(uu).withConfig({displayName:"DetailView__StyledTimeline",componentId:"sc-1iossoz-3"})(["grid-area:timeline;"]);function fu(){return Object(r.jsxs)(su,{children:[Object(r.jsx)(du,{}),Object(r.jsx)(lu,{}),Object(r.jsx)(bu,{})]})}var ju=Object(s.a)(y.l).withConfig({displayName:"ColorablePersonIcon",componentId:"sc-197hm01-0"})((function(e){var t=e.iconColor;return t?"color: ".concat(t,";"):""})),Ou=function(e){return e.highlighted&&"background-color: ".concat(Nt,"; border-radius: 2px;")},pu=function(e){return"cursor: pointer;"+(e.selected?"font-weight: 700;":"")},hu=function(e){return e.masked&&"opacity: 50%;"},vu=function(e){var t=e.title,n=e.as,i=void 0===n?"div":n,a=e.defaultToggleState,o=void 0!==a&&a,s=e.children,l=i,d=Object(c.useState)(o),b=Object(x.a)(d,2),f=b[0],j=b[1],O=ht((function(){j((function(e){return!e}))}));return Object(r.jsxs)(l,{children:[Object(r.jsxs)(gu,{children:[t,Object(r.jsx)(qn,Object(u.a)(Object(u.a)({},O),{},{spaceLeft:!0,children:f?Object(r.jsx)(y.f,{"aria-label":"D\xe9plier"}):Object(r.jsx)(y.c,{"aria-label":"Replier"})}))]}),f&&Object(r.jsx)(mu,{children:s})]})},gu=Hn,mu=function(e){var t=e.children;return Object(r.jsx)(r.Fragment,{children:t})},xu=function(e){var t=e.className,n=void 0===t?"octicon":t,c=e["aria-label"],i=e.verticalAlign,a=void 0===i?"text-bottom":i;return Object(r.jsx)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor",style:{display:"inline-block",userSelect:"none",verticalAlign:a},"aria-label":c,className:n,children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M 6.457 1.047 c 0.659 -1.234 2.427 -1.234 3.086 0 l 6.082 11.378 A 1.75 1.75 0 0 1 14.082 15 H 1.918 a 1.75 1.75 0 0 1 -1.543 -2.575 L 6.457 1.047 z M 9 11 a 1 1 0 0 0 -2 0 a 1 1 0 0 0 2 0 z m -0.25 -5.25 a 0.75 0.75 0 0 0 -1.5 0 v 2.5 a 0.75 0.75 0 0 0 1.5 0 v -2.5 z"})})},yu=function(e){var t=e.className,n=void 0===t?"octicon":t,c=e["aria-label"],i=e.verticalAlign,a=void 0===i?"text-bottom":i;return Object(r.jsx)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",fill:"currentColor",style:{display:"inline-block",userSelect:"none",verticalAlign:a},"aria-label":c,className:n,children:Object(r.jsx)("path",{fillRule:"evenodd",d:"M 8 0 a 8 8 0 1 0 0 16 a 8 8 0 0 0 0 -16 z M 6.5 7.75 A 0.75 0.75 0 0 1 7.25 7 h 1 a 0.75 0.75 0 0 1 0.75 0.75 v 2.75 h 0.25 a 0.75 0.75 0 0 1 0 1.5 h -2 a 0.75 0.75 0 0 1 0 -1.5 h 0.25 v -2 h -0.25 a 0.75 0.75 0 0 1 -0.75 -0.75 z M 8 6 a 1 1 0 0 1 0 -2 a 1 1 0 0 1 0 2 z"})})},wu=n(215),ku={Error:"erreur",Warning:"alerte",Info:"note"};var Cu=Object(j.pipe)((function(e){return ku[e.level]}),j.capitalize),Mu=s.a.div.withConfig({displayName:"EventErrorContextMenu__ErrorTitle",componentId:"sc-rfzac-0"})(["align-self:center;padding-left:1em;"]),Eu=Object(s.a)(Vn).withConfig({displayName:"EventErrorContextMenu__TabButton",componentId:"sc-rfzac-1"})(["background-color:#fafbfc;border:1px solid rgba(27,31,35,0.12);box-shadow:0px 1px 0px rgba(27,31,35,0.04),inset 0px 2px 0px rgba(255,255,255,0.25);padding:0.25em;"]),_u=Object(s.a)(Eu).withConfig({displayName:"EventErrorContextMenu__GroupableTabButton",componentId:"sc-rfzac-2"})(["",""],(function(e){switch(e.position){case"left":return"\n          border-top-left-radius: 4px; \n          border-bottom-left-radius: 4px;\n          border-right-width: 0;";case"right":return"\n          border-top-right-radius: 4px;\n          border-bottom-right-radius: 4px;";case"between":return"border-right-width: 0;";default:return""}})),Su=s.a.div.withConfig({displayName:"EventErrorContextMenu__TitleBase",componentId:"sc-rfzac-3"})(["display:grid;grid-template-columns:auto auto auto auto 1fr auto;padding-top:0.25em;padding-left:0.25em;"]),Nu=Object(s.a)(qn).withConfig({displayName:"EventErrorContextMenu__TitleCloseIcon",componentId:"sc-rfzac-4"})(["align-self:start;"]),Iu=s.a.div.withConfig({displayName:"EventErrorContextMenu__CountDisplay",componentId:"sc-rfzac-5"})(["padding:0.25em;border-top:1px solid rgba(27,31,35,0.12);border-bottom:1px solid rgba(27,31,35,0.12);border-left:1px solid rgba(27,31,35,0.12);box-shadow:0px 1px 0px rgba(27,31,35,0.04),inset 0px 2px 0px rgba(255,255,255,0.25);"]),Au=s.a.div.withConfig({displayName:"EventErrorContextMenu__ContentBase",componentId:"sc-rfzac-6"})(["padding:0.25em;"]),Lu=s.a.p.withConfig({displayName:"EventErrorContextMenu__ContentTitle",componentId:"sc-rfzac-7"})(["text-align:center;"]),Bu=function(e){var t=e.error;return Object(r.jsx)(Au,{children:Object(r.jsx)(Lu,{children:t.message})})};function Ru(e,t){return"translate3d(".concat(e,"px, ").concat(t,"px, 0)")}var zu=s.a.div.withConfig({displayName:"EventErrorContextMenu__Overlay",componentId:"sc-rfzac-8"})(["position:fixed;top:0;left:0;right:0;bottom:0;z-index:9998;pointer-events:",";"],(function(e){return e.show?"auto":"none"})),Tu=s.a.div.withConfig({displayName:"EventErrorContextMenu__DetailsMenu",componentId:"sc-rfzac-9"})(["z-index:9998;top:0;position:absolute;width:20em;min-height:200px;background-color:white;box-shadow:1px 1px 5px "," ",";border-radius:3px;pointer-events:auto;transition:box-shadow 300ms ease;"],(function(e){return e.active?"2px":"0"}),Lt),Pu=Object($n.animated)(Tu),Du=Object(s.a)(Vn).withConfig({displayName:"EventErrorContextMenu__DraggableIcon",componentId:"sc-rfzac-10"})(["cursor:grab;padding-left:0.25em;padding-right:0.25em;"]),Fu=function(e){var t=e.highlight,n=e.errors,i=e.$parentRef,a=e.close,o=Object(c.useState)(!1),s=Object(x.a)(o,2),l=s[0],d=s[1],b=Object($n.useSpring)((function(){return{xy:[0,0]}})),f=Object(x.a)(b,2),j=f[0].xy,O=f[1],p=Object(wu.a)((function(e){var t=e.down,n=e.offset;d(t),O({xy:n})})),h=Object(c.useRef)(null),v=or(i,h,"north-east"),g=Object(x.a)(v,3),m=g[0],w=g[1],k=g[2];Object(c.useEffect)((function(){return w(),function(){k()}}),[]);var C=Object(c.useMemo)((function(){return Object(V.E)(n,(function(e){var t=e.level;return"Error"===t?0:"Warning"===t?1:2}))}),[n]),M=Object(c.useState)([0,C[0]]),E=Object(x.a)(M,2),_=Object(x.a)(E[0],2),S=_[0],N=_[1],I=E[1],A=Object(c.useCallback)((function(){S+1<C.length&&I([S+1,C[S+1]])}),[C,S]),L=Object(c.useCallback)((function(){S>0&&I([S-1,C[S-1]])}),[C,S]);return Object(r.jsx)(nr,{children:Object(r.jsx)(zu,{show:l,children:Object(r.jsxs)(Pu,{active:t,ref:h,onClick:pt,onMouseUp:pt,onContextMenu:pt,style:Object(u.a)(Object(u.a)({},m),{},{transform:j.interpolate(Ru)}),children:[Object(r.jsxs)(Su,{children:[Object(r.jsx)(Du,Object(u.a)(Object(u.a)({},p()),{},{children:Object(r.jsx)(y.h,{})})),Object(r.jsx)(_u,{as:"button",position:"left",onClick:L,disabled:0===S,children:Object(r.jsx)(y.d,{})}),Object(r.jsxs)(Iu,{children:[S+1,"/",C.length]}),Object(r.jsx)(_u,{as:"button",position:"right",onClick:A,disabled:S+1===C.length,children:Object(r.jsx)(y.e,{})}),Object(r.jsx)(Mu,{children:Cu(N)}),Object(r.jsx)(Nu,Object(u.a)(Object(u.a)({spaceRight:!0},ht(a)),{},{children:Object(r.jsx)(y.p,{"aria-label":"Fermer le menu contextuel d'erreur"})}))]}),Object(r.jsx)(Bu,{error:N})]})})})},Gu=Object(s.a)(y.o).withConfig({displayName:"EventErrors__SipErrorIcon",componentId:"sc-1dpghyi-0"})(["color:",";"],Bt),$u=Object(s.a)(xu).withConfig({displayName:"EventErrors__SipWarningIcon",componentId:"sc-1dpghyi-1"})(["color:",";"],Rt),Uu=Object(s.a)(yu).withConfig({displayName:"EventErrors__SipInfoIcon",componentId:"sc-1dpghyi-2"})(["color:",";"],zt),Hu=Object(s.a)(y.o).withConfig({displayName:"EventErrors__SipGrayedErrorIcon",componentId:"sc-1dpghyi-3"})(["color:",";"],At),Wu=Object(s.a)(xu).withConfig({displayName:"EventErrors__SipGrayedWarningIcon",componentId:"sc-1dpghyi-4"})(["color:",";"],At),Vu=Object(s.a)(yu).withConfig({displayName:"EventErrors__SipGrayedInfoIcon",componentId:"sc-1dpghyi-5"})(["color:",";"],At);function qu(e,t,n){return 0===e?"":1===e?t:"".concat(e," ").concat(n)}function Ku(e){var t,n,r;return Object(j.compact)([qu((null===(t=e.Error)||void 0===t?void 0:t.length)||0,"1 erreur","erreurs"),qu((null===(n=e.Warning)||void 0===n?void 0:n.length)||0,"1 alerte","alertes"),qu((null===(r=e.Info)||void 0===r?void 0:r.length)||0,"1 note","notes")]).join(", ")}function Zu(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(j.groupBy)((function(e){return e.level}),e),r=Ku(n);if(t){if(n.Error)return[Gu,Bt,r];if(n.Warning)return[$u,Rt,r];if(n.Info)return[Uu,zt,r]}else{if(n.Error)return[Hu,r];if(n.Warning)return[Wu,r];if(n.Info)return[Vu,r]}throw new Error("Unreachable code")}var Xu=Object(s.a)(qn).withConfig({displayName:"EventErrors__PilledIconSpacer",componentId:"sc-1dpghyi-6"})(["position:relative;&:before{content:attr(data-count);border-radius:999px;line-height:1;font-size:10px;height:11px;min-width:11px;position:absolute;display:inline-block;top:-20%;right:-20%;color:white;text-align:center;padding:0 2px;}"]),Yu=Object(s.a)(Xu).withConfig({displayName:"EventErrors__ColoredPilledIconSpacer",componentId:"sc-1dpghyi-7"})(["&:before{background-color:",";}"],(function(e){return e.color})),Ju=function(e){var t=e.errors,n=Zu(t,!1),c=Object(x.a)(n,2),i=c[0],a=c[1],o=ar(a),u=Object(x.a)(o,4),s=u[0],l=u[1],d=u[2],b=u[3];return Object(r.jsxs)(Yu,{spaceLeft:!0,ref:l,onMouseEnter:d,onFocus:d,onMouseLeave:b,onBlur:b,color:At,"data-count":t.length,children:[Object(r.jsx)(i,{"aria-label":a}),s]})},Qu=function(e){var t=e.errors,n=e.highlight,i=Object(c.useRef)(null),a=Object(c.useState)(!1),o=Object(x.a)(a,2),u=o[0],s=o[1],l=Object(c.useMemo)((function(){return Zu(t)}),[t]),d=Object(x.a)(l,3),b=d[0],f=d[1],j=d[2],O=ur(i,j),p=Object(x.a)(O,3),h=p[0],v=p[1],g=p[2];return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(Yu,{spaceLeft:!0,color:f,"data-count":t.length,ref:i,onMouseEnter:v,onFocus:v,onMouseLeave:g,onBlur:g,onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),s((function(e){return!e}))},onMouseUp:pt,children:[Object(r.jsx)(b,{"aria-label":j}),u&&Object(r.jsx)(Fu,{highlight:n,$parentRef:i,close:function(){s(!1),g()},errors:t}),h]})})},es=s.a.div.withConfig({displayName:"EventLine__Base",componentId:"sc-1f46tul-0"})(["display:grid;grid-template-columns:auto 2fr auto auto;padding-top:2px;padding-bottom:2px;padding-left:0.25em;padding-right:0.25em;justify-content:space-between;align-items:center;margin-right:",";"," "," ",";"],(function(e){return e.grouped?"18px;":"20px;"}),pu,hu,Ou),ts=function(e){var t=e.kind,n=Object(l.c)(cn),c=Jn(t);return Object(r.jsx)(Vn,{spaceRight:!0,children:Object(r.jsx)(c,{iconColor:n?n(t):void 0})})},ns=function(e){var t=e.event,n=e.origin,i=e.grouped,a=void 0!==i&&i,o={id:t.event.id,kind:"Event"},s=$i(o),l=vt(o),d=a?Object(r.jsx)("span",{}):Object(r.jsx)(ts,{kind:t.event.kind}),b=Object(c.useMemo)((function(){return void 0!==t.errors&&t.errors.length>0&&Object(r.jsx)(Qu,{highlight:!0===t.highlighted,errors:t.errors})}),[t.errors,t.highlighted]);return Object(r.jsxs)(es,Object(u.a)(Object(u.a)(Object(u.a)({},s),l),{},{selected:!0===t.selected,highlighted:!0===t.highlighted,masked:!0===t.masked,grouped:a,children:[d,Object(r.jsx)("div",{children:nu(t.event,n,a)}),Object(r.jsx)(pr,{dates:t.event.datation}),b]}))},rs=s.a.div.withConfig({displayName:"LeftSpacer",componentId:"sc-18t1mc6-0"})(["border-color:",";box-sizing:border-box;margin-left:11px;padding-left:3px;border-left-style:solid;border-width:2px;"],(function(e){var t=e.borderColor;return void 0===t?At:t})),cs=Object(s.a)(rs).withConfig({displayName:"LeftSpacer__LeftBottomSpacer",componentId:"sc-18t1mc6-1"})(["border-bottom-style:solid;padding-bottom:2px;margin-bottom:0.25em;overflow-y:auto;min-height:2em;",""],Un),is=Object(s.a)(rs).withConfig({displayName:"EventGroup__LeftBottomSpacer",componentId:"sc-eq6xs6-0"})(["border-bottom-style:solid;padding-bottom:2px;margin-bottom:2px;margin-right:2px;"]),as=function(e){var t=e.kind,n=e.events,i=e.start,a=e.end,o=e.origin,s=$i(Object(c.useMemo)((function(){return n.map((function(e){return{id:e.event.id,kind:"Event"}}))}),[n])),d=Object(l.c)(cn),b=Jn(t),f=Object(c.useMemo)((function(){return n.some((function(e){return e.highlighted}))}),[n]),O=Object(c.useMemo)((function(){return n.every((function(e){return e.masked}))}),[n]),p=Object(c.useMemo)((function(){return n.some((function(e){return e.selected}))}),[n]),h=Object(c.useMemo)((function(){return Object(j.compact)(n.flatMap((function(e){return e.errors})))}),[n]),v=Object(c.useMemo)((function(){return!Object(j.isNil)(h)&&h.length>0&&Object(r.jsx)(Ju,{errors:h})}),[h]);return Object(r.jsx)(vu,{title:Object(r.jsxs)(os,Object(u.a)(Object(u.a)({masked:O,selected:p,highlighted:f},s),{},{children:[Object(r.jsx)(Vn,{spaceRight:!0,children:Object(r.jsx)(b,{iconColor:d?d(t):void 0})}),Object(r.jsxs)("div",{children:[n.length," ",ru(t)]}),Object(r.jsx)(pr,{dates:Object(j.compact)([i,a])}),v]})),children:Object(r.jsx)(is,{borderColor:d?d(t):void 0,children:n.map((function(e){return Object(r.jsx)(ns,{event:e,origin:o,grouped:!0},e.event.id)}))})})},os=s.a.div.withConfig({displayName:"EventGroup__InteractableEnlarge",componentId:"sc-eq6xs6-1"})(["flex:1;display:grid;grid-template-columns:auto 1fr auto auto;align-items:center;padding-top:1px;padding-bottom:1px;padding-left:0.25em;padding-right:0.25em;"," "," ",""],Ou,hu,(function(e){return e.selected&&"font-weight: 700;"})),us=Object(s.a)(Wn).withConfig({displayName:"InteractiveEnlarge",componentId:"sc-t6tbom-0"})(["padding-top:2px;padding-bottom:2px;"," ",""],Ou,pu),ss=function(e){return Object(c.useMemo)((function(){return Object(j.reduce)((function(e,t){var n=t.event,r=Object(j.last)(e);return void 0===r||r.kind!==n.kind?(e.push({id:n.id,kind:n.kind,events:t,start:Object(j.first)(n.datation),end:Object(j.last)(n.datation),masked:t.masked,selected:t.selected,highlighted:t.highlighted}),e):(Object(j.isArray)(r.events)?r.events.push(t):r.events=[r.events,t],r.start=Object(V.p)([r.start,Object(j.first)(n.datation)],(function(e){return null===e||void 0===e?void 0:e.value})),r.end=Object(V.l)([r.end,Object(j.last)(n.datation)],(function(e){return null===e||void 0===e?void 0:e.value})),e)}),[],e)}),[e])},ls=function(e){var t=e.kind,n=e.events,a=e.group,o=e.selected,s=e.highlighted,d=Object(l.b)(),b=Object(c.useMemo)((function(){return n.map((function(e){return{id:e.event.id,kind:"Event"}}))}),[n]),f=vt(b),j=ht(Object(c.useCallback)((function(){d(at(a.id))}),[d,a.id])),O=$i(b),p=ss(n),h=Object(l.c)(on),v=Object(r.jsxs)(us,Object(u.a)(Object(u.a)(Object(u.a)({},f),O),{},{highlighted:s,selected:o,children:[Object(r.jsx)(qn,Object(u.a)(Object(u.a)({as:"span"},j),{},{spaceLeft:!0,spaceRight:!0,children:Object(r.jsx)(y.p,{className:"red","aria-label":"Supprimer"})})),Object(r.jsx)(Vn,{as:"span",spaceRight:!0,children:Object(r.jsx)(ju,{iconColor:h?h(a.id):void 0,"aria-label":"individu"})}),Object(r.jsx)(A,{as:"span",id:a})]})),g=Object(r.jsx)(cs,{borderColor:h?h(a.id):void 0,children:p.map((function(e){return Array.isArray(e.events)?Object(r.jsx)(as,Object(u.a)(Object(u.a)({},e),{},{origin:t}),e.id):Object(r.jsx)(ns,{event:e.events,origin:t},e.id)}))});return Object(r.jsx)(vu,{as:i.a.Fragment,title:v,children:g})},ds=Object(s.a)(Hn).withConfig({displayName:"DisabledNote__InteractiveEnlarge",componentId:"sc-empf3o-0"})(["padding-top:1px;padding-bottom:1px;"," ",""],Ou,pu),bs=s.a.span.withConfig({displayName:"DisabledNote__Masked",componentId:"sc-empf3o-1"})(["opacity:50%;"]),fs=function(e){var t=e.group,n=e.selected,c=e.highlighted,i=Object(l.b)(),a=ht((function(){i(at(t.id))})),o=Object(l.c)(on);return Object(r.jsxs)(ds,{highlighted:c,selected:n,children:[Object(r.jsx)(qn,Object(u.a)(Object(u.a)({as:"span"},a),{},{spaceRight:!0,children:Object(r.jsx)(y.p,{className:"red","aria-label":"Supprimer"})})),Object(r.jsx)(Vn,{as:"span",spaceRight:!0,children:Object(r.jsx)(ju,{iconColor:o?o(t.id):void 0,"aria-label":"individu"})}),Object(r.jsx)(bs,{children:Object(r.jsx)(A,{as:"span",id:t,short:!0})})]})},js=function(e){var t=e.group,n=e.selected,c=e.highlighted;return Object(r.jsxs)(ds,{highlighted:c,selected:n,children:[Object(r.jsx)(Vn,{as:"span",spaceRight:!0,children:Object(r.jsx)(y.j,{"aria-label":"lieu"})}),Object(r.jsx)(bs,{children:t.label})]})},Os=function(e){var t=e.kind,n=e.events,a=e.group,o=e.selected,s=e.highlighted,l=Object(c.useMemo)((function(){return n.map((function(e){return{id:e.event.id,kind:"Event"}}))}),[n]),d=vt(l),b=$i(l),f=ss(n),O=Object(r.jsxs)(us,Object(u.a)(Object(u.a)(Object(u.a)({},d),b),{},{highlighted:s,selected:o,children:[Object(r.jsx)(Vn,{as:"span",spaceRight:!0,spaceLeft:!0,children:Object(r.jsx)(y.j,{"aria-label":"lieu"})}),Object(r.jsx)("span",{children:a.label})]})),p=Object(r.jsx)(cs,{children:f.map((function(e){return Object(j.isArray)(e.events)?Object(r.jsx)(as,Object(u.a)(Object(u.a)({},e),{},{origin:t}),e.id):Object(r.jsx)(ns,{event:e.events,origin:t},e.id)}))});return Object(r.jsx)(vu,{as:i.a.Fragment,title:O,children:p})};var ps=Object(s.a)(Hn).withConfig({displayName:"Information__Base",componentId:"sc-1rpwq78-0"})(["flex-direction:column;padding:0.125em;height:100%;overflow-y:auto;",""],Un),hs=function(e){var t=e.className,n=Object(l.c)(Io);return Object(r.jsxs)(ps,{className:t,children:[Object(j.map)((function(e){return"ActorNote"===e.kind?Object(r.jsx)(ls,Object(u.a)({},e),"a__"+e.group.id):Object(r.jsx)(Os,Object(u.a)({},e),"p__"+e.group.id)}),n.no),Object(j.size)(n.yes)>0&&Object(r.jsx)("hr",{}),Object(j.map)((function(e){return"ActorNote"===e.kind?Object(r.jsx)(fs,Object(u.a)({},e),"a__"+e.group.id):Object(r.jsx)(js,Object(u.a)({},e),"p__"+e.group.id)}),n.yes)]})},vs=s.a.img.withConfig({displayName:"ScaledDownImg",componentId:"sc-1iecvj0-0"})(["object-fit:scale-down;width:auto;height:auto;"]),gs=Object(s.a)(Hn).withConfig({displayName:"Organisms__FixedHeightFlex",componentId:"sc-dkicq0-0"})(["justify-content:space-between;width:100%;& > *{width:4em;}"]),ms=function(){return Object(r.jsxs)(gs,{children:[Object(r.jsx)(vs,{src:"./img/um.png",alt:"Logo Universit\xe9 de Montpellier"}),Object(r.jsx)(vs,{src:"./img/cnrs.png",alt:"Logo CNRS"}),Object(r.jsx)(vs,{src:"./img/lirmm.png",alt:"Logo LIRMM"}),Object(r.jsx)(vs,{src:"./img/um3.png",alt:"Logo Universit\xe9 Paul Valery"}),Object(r.jsx)(vs,{src:"./img/anr.jpg",alt:"Logo Agence Nationale de la Recherche"})]})},xs=i.a.forwardRef((function(e,t){return Object(r.jsx)("div",{ref:t,children:Object(r.jsx)(y.n,{size:24})})})),ys=s.a.div.withConfig({displayName:"InfoButton__AbsoluteDiv",componentId:"sc-327oyg-0"})(["top:0;z-index:9999;width:30em;padding:0.25em;position:absolute;background-color:white;box-shadow:1px 1px 5px 0 ",";border-radius:3px;pointer-events:auto;"],Lt),ws=s.a.div.withConfig({displayName:"InfoButton__Head",componentId:"sc-327oyg-1"})(["display:flex;justify-content:space-between;"]),ks=Object(s.a)(qn).withConfig({displayName:"InfoButton__TitleCloseIcon",componentId:"sc-327oyg-2"})(["align-self:start;"]),Cs=s.a.p.withConfig({displayName:"InfoButton__SquishedParagraph",componentId:"sc-327oyg-3"})(["line-height:1.2;"]),Ms=Object(s.a)(Hn).withConfig({displayName:"InfoButton__PaddedStyledFlex",componentId:"sc-327oyg-4"})(["padding-top:1em;"]),Es=s.a.span.withConfig({displayName:"styled-components__SmallFont",componentId:"sc-pu5d2u-0"})(["font-size:14px;"]),_s=function(e){var t="string"===typeof e?e:e.filter,n="string"!==typeof e&&e.selected;return function(e,r){var c=r(),i=re(c),a=Object(j.pipe)(Object(j.transform)((function(e,n){var r,c=Object(j.get)(t,n),i=le(c);(null!==(r=e[i])&&void 0!==r?r:e[i]={value:i,kind:se(c),count:0}).count++}),{}),Object(j.sortBy)("value"))(i);e(Oe({selected:n,filter:t,values:a}))}},Ss=function(e){var t=e.kind,n=e.state,i=n.value,a=n.count,o=e.parent,u=e.hideNumber,s=void 0!==u&&u,d=e.color,b=Object(l.b)(),f=Object(c.useCallback)((function(){b(he([o,t]))}),[b,o,t]);return Object(r.jsx)(Jo,{checked:null!==i,handleCheck:f,color:d?d(t):Lt,children:Object(r.jsxs)(Es,{children:[t," ",!s&&"(".concat(a,")")]})},t)},Ns=function(){var e=Object(l.b)(),t=Object(c.useState)(""),n=Object(x.a)(t,2),i=n[0],a=n[1],o=Object(c.useCallback)((function(e){a(e.currentTarget.value)}),[]),u=Object(c.useCallback)((function(t){t.preventDefault(),i&&e(_s(i)),a("")}),[i,e]);return Object(r.jsxs)("form",{onSubmit:u,onMouseUpCapture:pt,children:[Object(r.jsx)("input",{type:"text",name:"add-filter",id:"add-filter",placeholder:"add filter","aria-label":"add filter",value:i,onInput:o}),Object(r.jsx)("button",{type:"submit",disabled:""===i.trim(),children:"\u2714"})]})};function Is(){var e=Object(Pt.a)(["\n  background-color: ",";\n  border-radius: 4px;\n  padding-left: 0.125em;\n  padding-right: 0.125em;\n"]);return Is=function(){return e},e}function As(){var e=Object(Pt.a)(["\n  flex-wrap: wrap;\n  flex: 1;\n  max-height: 10em;\n  overflow-y: auto;\n  margin-left: 1em;\n  border-top: 2px solid ",";\n  border-bottom: 2px solid ",";\n  border-top-right-radius: 6px;\n  border-bottom-right-radius: 6px;\n  padding-top: 0.125em;\n  ","\n"]);return As=function(){return e},e}var Ls=Object(s.a)(Hn)(As(),At,At,Un),Bs=s.a.code(Is(),Nt),Rs=function(e){var t=e.name,n=e.values,i=e.kinds,a=Object(l.b)(),o=ht(Object(c.useCallback)((function(){a(pe(t))}),[a,t])),s=ht(Object(c.useCallback)((function(){a(je(t))}),[a,t]));return Object(r.jsxs)("div",{className:"pr2 mt3",children:[Object(r.jsxs)(Hn,{children:["event.kind"!==t&&Object(r.jsx)(qn,Object(u.a)(Object(u.a)({as:"span"},o),{},{spaceLeft:!0,spaceRight:!0,children:Object(r.jsx)(y.p,{className:"red","aria-label":"Supprimer"})})),Object(r.jsxs)("pre",{className:"ma0",children:[Object(r.jsx)(Bs,{children:t}),":"," ",Object(r.jsx)(Bs,{children:i.join(" | ")})]})," ",Object(r.jsx)("button",Object(u.a)(Object(u.a)({},s),{},{children:"\u2714 select"}))]}),Object(r.jsx)(Ls,{children:Object(ue.map)(n,(function(e,n){return Object(r.jsx)(Ss,{kind:n,state:e,parent:t},n)}))})]})};function zs(){var e=Object(Pt.a)(["\n  top: 0;\n  z-index: 9999;\n  width: 50%;\n  max-height: 50%;\n  padding: 0.25em;\n  position: absolute;\n  background-color: white;\n  box-shadow: 1px 1px 5px 0 ",";\n  border-radius: 3px;\n  pointer-events: auto;\n  overflow-y: auto;\n  ","\n"]);return zs=function(){return e},e}function Ts(){var e=Object(Pt.a)(["\n  position: absolute;\n  left: 0;\n  bottom: 0;\n"]);return Ts=function(){return e},e}function Ps(){var e=Object(Pt.a)(["\n  line-height: 0;\n  border: 1px solid ",";\n  border-radius: 4px;\n  position: relative;\n  padding: 2px;\n"]);return Ps=function(){return e},e}function Ds(){var e=Object(Pt.a)(["\n  align-self: end;\n"]);return Ds=function(){return e},e}var Fs=s.a.span(Ds()),Gs=s.a.button(Ps(),Lt),$s=Object(s.a)(y.c)(Ts()),Us=s.a.div(zs(),Lt,Un),Hs=function(){var e=Object(c.useRef)(null),t=Object(c.useRef)(null),n=or(e,t,"south-west-right"),i=Object(x.a)(n,3),a=i[0],o=i[1],s=i[2],d=Object(c.useState)(!0),b=Object(x.a)(d,2),f=b[0],O=b[1],p=ht(Object(c.useCallback)((function(){f?(o(),O(!1)):(s(),O(!0))}),[f,o,s])),h=Object(l.c)(ke),v=Object(l.c)(Ce);return Object(r.jsxs)(Fs,{children:[Object(r.jsxs)(Gs,Object(u.a)(Object(u.a)({ref:e},p),{},{children:[Object(r.jsx)(y.g,{size:16}),v&&Object(r.jsx)($s,{size:10})]})),Object(r.jsx)(nr,{children:Object(r.jsxs)(Us,{ref:t,style:a,children:[Object(r.jsx)(Ns,{}),Object(r.jsx)("div",{children:Object(j.map)((function(e){return Object(r.jsx)(Rs,Object(u.a)({},e),e.name)}),h)})]})})]})},Ws=s.a.code.withConfig({displayName:"CustomFilters__StyledCode",componentId:"sc-138enfn-0"})(["background-color:",";border-radius:4px;padding-left:0.125em;padding-right:0.125em;margin-right:0.25em;"],Nt),Vs=s.a.div.withConfig({displayName:"CustomFilters__Gridy",componentId:"sc-138enfn-1"})(["display:grid;grid-template-columns:1fr auto;"]),qs=Object(s.a)(Hn).withConfig({displayName:"CustomFilters__ScrollableFlex",componentId:"sc-138enfn-2"})(["overflow-y:hidden;overflow-x:auto;",""],Un),Ks=function(){var e=Object(l.b)(),t=Object(l.c)(ne);Object(c.useEffect)((function(){t&&e(_s({selected:!0,filter:"event.kind"}))}),[t,e]);var n=Object(l.c)(ye),i=Object(l.c)(an);return Object(r.jsx)(Ht,{finished:n,size:1,children:Object(r.jsxs)(Vs,{children:[Object(r.jsxs)(qs,{children:[Object(r.jsx)(Es,{as:"div",style:{alignSelf:"center"},children:Object(r.jsx)(Ws,{children:Object(r.jsx)("i",{children:null===n||void 0===n?void 0:n.name})})}),n&&Object(ue.map)(n.values,(function(e,t){return Object(r.jsx)(Ss,{kind:t,state:e,parent:n.name,color:i,hideNumber:!0},t)}))]}),Object(r.jsx)(Hs,{})]})})},Zs=function(e){var t=e.actor,n=t.id,i=Object(l.b)(),a=Object(l.c)(on),o=Object(l.c)(Ne),u=Object(c.useCallback)((function(){i(_i(n))}),[i,n]);return Object(r.jsx)(Jo,{color:a?a(n):Lt,checked:Pe(t,o),handleCheck:u,children:Object(r.jsx)(A,{as:Es,id:t,short:!0})})},Xs=Object(s.a)(Hn).withConfig({displayName:"ActorList__WrapFlex",componentId:"sc-1stvmin-0"})(["flex-wrap:wrap;"]),Ys=function(){var e=Object(l.c)(ae);return Object(r.jsx)(Xs,{children:Object(j.map)((function(e){return Object(r.jsx)(Zs,{actor:e},e.id)}),e)})},Js=Object(f.c)({name:"switch",initialState:"Kind",reducers:{toggleSwitch:function(e){return"Actor"===e?"Kind":"Actor"},switchToActor:function(){return"Actor"},switchToKind:function(){return"Kind"},switchTo:function(e,t){return t.payload}}}),Qs=Js.reducer,el=Js.actions,tl=el.toggleSwitch,nl=(el.switchTo,el.switchToActor,el.switchToKind,s.a.label.withConfig({displayName:"ColorSwitch__StyledLabel",componentId:"sc-1x4ntbx-0"})(["position:relative;display:inline-block;width:1em;height:100%;margin-bottom:0;"])),rl=s.a.div.withConfig({displayName:"ColorSwitch__StyledSlider",componentId:"sc-1x4ntbx-1"})(["cursor:pointer;height:100%;width:100%;padding:12.5%;background-color:",";transition:0.4s;border-radius:999em;"],Lt),cl=s.a.div.withConfig({displayName:"ColorSwitch__StyledKnob",componentId:"sc-1x4ntbx-2"})(["height:50%;background-color:white;transition:0.4s;border-radius:999em;transform:translate3d(0,",",0);"],(function(e){return e.slide?"0%":"100%"})),il=function(e){return"Actor"===e.switch},al=function(){var e=Object(l.b)(),t=Object(l.c)(il),n=Object(c.useCallback)((function(){e(tl())}),[e]);return Object(r.jsxs)(nl,{className:"pointer",onMouseUp:pt,children:[Object(r.jsx)(qo,{type:"checkbox",name:"switch",id:"toggle-switch",checked:t,onChange:n}),Object(r.jsx)(rl,{children:Object(r.jsx)(cl,{slide:t})})]})},ol=s.a.section.withConfig({displayName:"Mask__StyledSection",componentId:"sc-1umcaan-0"})(["display:grid;grid-template:'switches actors' auto 'switches kinds' auto / auto 1fr;grid-row-gap:0.125em;padding-top:0.125em;padding-right:0.125em;padding-bottom:0.125em;padding-left:0.25em;"]),ul=s.a.div.withConfig({displayName:"Mask__SwitchArea",componentId:"sc-1umcaan-1"})(["grid-area:switches;"]),sl=s.a.div.withConfig({displayName:"Mask__ActorsArea",componentId:"sc-1umcaan-2"})(["grid-area:actors;min-height:1.25em;padding-left:0.5em;padding-right:0.5em;"]),ll=s.a.div.withConfig({displayName:"Mask__KindsArea",componentId:"sc-1umcaan-3"})(["grid-area:kinds;min-height:1.25em;padding-left:0.5em;padding-right:0.5em;"]),dl=function(e){var t=e.className;return Object(r.jsxs)(ol,{className:t,children:[Object(r.jsx)(ul,{children:Object(r.jsx)(al,{})}),Object(r.jsx)(sl,{children:Object(r.jsx)(Ys,{})}),Object(r.jsx)(ll,{children:Object(r.jsx)(Ks,{})})]})},bl=s.a.div.withConfig({displayName:"Header__StyledHeader",componentId:"sc-1ce2s2x-0"})(["display:grid;justify-content:center;grid-template-columns:1fr auto;border-bottom:1px solid ",";"],At),fl=Object(s.a)((function(e){var t=e.className,n=Object(c.useRef)(null),i=Object(c.useRef)(null),a=or(n,i,"north-west"),o=Object(x.a)(a,3),s=o[0],l=o[1],d=o[2],b=Object(c.useState)(!0),f=Object(x.a)(b,2),j=f[0],O=f[1],p=ht(Object(c.useCallback)((function(){j?(l(),O(!1)):(d(),O(!0))}),[j,l,d]));return Object(r.jsxs)("div",{className:t,children:[Object(r.jsx)(qn,Object(u.a)(Object(u.a)({ref:n},p),{},{style:{color:Lt},children:Object(r.jsx)(xs,{})})),Object(r.jsx)(nr,{children:Object(r.jsxs)(ys,{ref:i,style:s,children:[Object(r.jsxs)(ws,{children:[Object(r.jsx)("h3",{children:"A propos du projet"}),Object(r.jsx)(ks,Object(u.a)(Object(u.a)({spaceRight:!0},p),{},{children:Object(r.jsx)(y.p,{"aria-label":"Fermer le menu contextuel d'erreur"})}))]}),Object(r.jsx)(ms,{}),Object(r.jsxs)(Ms,{children:[Object(r.jsx)("a",{href:"https://anr.fr/Projet-ANR-17-CE38-0013",target:"_blank",rel:"noopener noreferrer",children:Object(r.jsx)(vs,{src:"./img/anr-long.png",alt:"Logo Agence Nationale de la Recherche"})}),Object(r.jsxs)(Cs,{children:["This research has been funded by a national French grant (",Object(r.jsx)("a",{href:"https://anr.fr/Projet-ANR-17-CE38-0013",target:"_blank",rel:"noopener noreferrer",children:"ANR Daphne 17-CE28-0013-01"}),")."]})]}),Object(r.jsxs)(Cs,{children:["Sources :"," ",Object(r.jsx)("a",{href:"http://siprojuris.symogih.org/",target:"_blank",rel:"noopener noreferrer",children:"SIPROJURIS"}),". Point d'entr\xe9e :"," ",Object(r.jsx)("a",{href:"http://symogih.org/",target:"_blank",rel:"noopener noreferrer",children:"symogih.org"}),"."]})]})})]})})).withConfig({displayName:"Header__StyledInfoBubble",componentId:"sc-1ce2s2x-1"})(["padding:2px;"]),jl=function(){return Object(r.jsxs)(bl,{children:[Object(r.jsx)(dl,{}),Object(r.jsx)(fl,{})]})},Ol=Object(s.a)(Oi).withConfig({displayName:"App__BorderedGridAutoRest",componentId:"sc-18k0nyn-0"})(["border-right:1px solid ",";"],At);var pl=function(){var e=Object(c.useRef)(null),t=Object(l.b)(),n=Object(c.useCallback)((function(e){t(g()),t(wn()),t(jn())}),[t]),i=b(),a=Object(c.useMemo)((function(){return{onMouseDown:function(e){i.current.click||(i.current.click=!0,i.current.x=e.pageX,i.current.y=e.pageY)},onMouseMove:function(e){i.current.click&&i.current.draggingTreshold(i.current,e)&&(i.current.dragging=!0,i.current.click=!1)},onMouseUp:function(e){i.current.click&&n(e),i.current.dragging=!1,i.current.click=!1}}}),[]);return Object(r.jsxs)("div",Object(u.a)(Object(u.a)({ref:e},a),{},{children:[Object(r.jsxs)(ji,{children:[Object(r.jsxs)(Ol,{children:[Object(r.jsx)(_t,{}),Object(r.jsx)(hs,{})]}),Object(r.jsxs)(Oi,{children:[Object(r.jsx)(jl,{}),Object(r.jsxs)(xi,{children:[Object(r.jsx)(fi,{}),Object(r.jsx)(fu,{})]})]})]}),Object(r.jsx)(bt,{})]}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var hl=n(61),vl=Object(f.c)({name:"highlight",initialState:null,reducers:{setHighlights:function(e,t){return Object(j.isArray)(t.payload)?t.payload:[t.payload]},clearHighlights:function(){return null}}}),gl=vl.actions,ml=(gl.setHighlights,gl.clearHighlights,vl.reducer),xl=Object(f.c)({name:"color",initialState:{kindDomain:["PassageExamen","Birth","Education","Retirement","SuspensionActivity","Death","ObtainQualification"],kindRange:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#6d071a","#fdbf6f"],actorRange:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#e5c494","#a6d854","#ffd92f","#b3b3b3"]},reducers:{}}).reducer,yl=Object(hl.b)({maxActors:T,color:xl,highlights:ml,selection:m,mask:Ni,timelineGroup:Bo,switch:Qs,superHighlight:Gi,relationSelection:tt,relationHighlight:za,actorData:ei,localisationData:ai,eventData:ni,graphData:ci,relationsData:ui,maskGlobalTime:Uc,maskGlobalMapBounds:qr,globalHighlight:pn,globalSelection:xn,actorSummary:dn,detailActors:rt,customFilter:be}),wl=Object(f.a)({reducer:yl,middleware:Object(f.d)({immutableCheck:!1,serializableCheck:!1})});o.a.render(Object(r.jsx)(l.a,{store:wl,children:Object(r.jsx)(pl,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[399,1,2]]]);
//# sourceMappingURL=main.fa91b4c9.chunk.js.map